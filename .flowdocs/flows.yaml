meta:
  app: "Orquestra"
  version: "0.2.0"
  description: "Plataforma enterprise modular con marketplace de extensiones, gestiÃ³n organizacional, usuarios/roles y mÃ³dulos dinÃ¡micos (KPI, Encuestas, Formularios, BI)."
  updated_at: "2026-02-22"
  sprint:
    number: 1
    goal: "Fundamentos: stack, design system y layout base"
    start: "2026-02-22"
    end: "2026-03-07"
    days_left: 13
  stats:
    total: 54
    implemented: 0
    partial: 0
    pending: 54
    with_tests: 0
    coverage_pct: 0

modules:
  - id: "landing"
    name: "Landing Page"
    description: "PÃ¡gina de aterrizaje pÃºblica del producto. Incluye hero con CTA, secciÃ³n de beneficios, pasos de funcionamiento, extensiones destacadas, beneficios cloud y CTA final. Debe verse enterprise y profesional."
    actors: ["visitante"]

  - id: "app_shell"
    name: "App Shell (Layout)"
    description: "Estructura general de la aplicaciÃ³n autenticada: AppLayout con sidebar dinÃ¡mica, header superior con selector de rol, Ã¡rea de contenido principal. Controla la inyecciÃ³n de mÃ³dulos y menÃº por roles/extensiones."
    actors: ["admin", "manager", "viewer"]

  - id: "marketplace"
    name: "Marketplace de Extensiones"
    description: "CatÃ¡logo de extensiones disponibles y activas. Permite habilitar/deshabilitar mÃ³dulos (KPI, Encuestas, BI). Cada extensiÃ³n muestra badge de estado, descripciÃ³n y botÃ³n de activaciÃ³n. Al activar, el sidebar se actualiza dinÃ¡micamente."
    actors: ["admin"]

  - id: "kpi"
    name: "Indicadores KPI"
    description: "MÃ³dulo de extensiÃ³n para gestiÃ³n y monitoreo de indicadores clave de rendimiento. Incluye listado de KPIs, creaciÃ³n via modal, widget para dashboard y lÃ³gica de semÃ¡foro (critical/warning/stable)."
    actors: ["admin", "manager", "viewer"]

  - id: "surveys"
    name: "Encuestas"
    description: "MÃ³dulo de extensiÃ³n para crear y distribuir encuestas de satisfacciÃ³n. Incluye listado de encuestas y visualizaciÃ³n de resultados con grÃ¡ficas mock."
    actors: ["admin", "manager"]

  - id: "bi"
    name: "Tableros BI"
    description: "MÃ³dulo de extensiÃ³n de Business Intelligence. Dashboard con grÃ¡ficas avanzadas (barras, lÃ­neas, donut) usando datos mock. Soporta descarga y comparticiÃ³n de reportes."
    actors: ["admin", "manager", "viewer"]

  - id: "user_management"
    name: "GestiÃ³n de Usuarios"
    description: "AdministraciÃ³n de usuarios de la organizaciÃ³n. Listado con bÃºsqueda, detalle de usuario, asignaciÃ³n de mÃºltiples roles via chips, asignaciÃ³n a grupos. Solo accesible para administradores."
    actors: ["admin"]

  - id: "roles_permissions"
    name: "Roles y Permisos"
    description: "GestiÃ³n de roles con matriz de permisos granulares (view_kpi, edit_kpi, activate_extensions, manage_users). Interfaz enterprise con tabla de permisos por rol."
    actors: ["admin"]

  - id: "user_groups"
    name: "Grupos de Usuarios"
    description: "GestiÃ³n de grupos organizacionales. Crear grupos, asignar usuarios a grupos y asignar rol por grupo. Permite organizar usuarios por departamento o funciÃ³n."
    actors: ["admin"]

  - id: "dashboard"
    name: "Dashboard Principal"
    description: "Panel principal de la aplicaciÃ³n autenticada. Muestra resumen de KPIs activos (widgets), accesos rÃ¡pidos a mÃ³dulos habilitados, y estado general de la organizaciÃ³n."
    actors: ["admin", "manager", "viewer"]

  - id: "global_state"
    name: "Estado Global"
    description: "Infraestructura de estado con Zustand. Maneja rol actual, extensiones activas, usuario actual y organizaciÃ³n. Permite activar extensiÃ³n, refrescar sidebar y cambiar rol en tiempo real."
    actors: ["system"]

  - id: "organization_mgmt"
    name: "GestiÃ³n de OrganizaciÃ³n"
    description: "MÃ³dulo para gestionar la estructura jerÃ¡rquica de la empresa: Ã¡reas, departamentos, responsables y empleados. Vista de Ã¡rbol expandible con CRUD de Ã¡reas."
    actors: ["admin", "manager"]

  - id: "contact"
    name: "PÃ¡gina de Contacto"
    description: "Formulario pÃºblico de captaciÃ³n de leads y solicitud de demo. Layout a 2 columnas con formulario + info de contacto, horarios y CTA de demo personalizada."
    actors: ["visitante"]

  - id: "forms"
    name: "Formularios"
    description: "MÃ³dulo de extensiÃ³n para crear formularios personalizados y recopilar informaciÃ³n del equipo. Incluye constructor de formularios y visualizaciÃ³n de respuestas."
    actors: ["admin", "manager"]

entities:
  - id: "user"
    name: "Usuario"
    states: ["active", "inactive", "suspended"]
    transitions:
      - from: "active"
        to: "inactive"
        action: "Desactivar usuario"
      - from: "inactive"
        to: "active"
        action: "Reactivar usuario"
      - from: "active"
        to: "suspended"
        action: "Suspender usuario"

  - id: "role"
    name: "Rol"
    states: ["active", "disabled"]
    transitions: []

  - id: "permission"
    name: "Permiso"
    states: []
    transitions: []

  - id: "group"
    name: "Grupo"
    states: ["active", "archived"]
    transitions: []

  - id: "extension"
    name: "ExtensiÃ³n"
    states: ["available", "active"]
    transitions:
      - from: "available"
        to: "active"
        action: "Habilitar extensiÃ³n"
      - from: "active"
        to: "available"
        action: "Deshabilitar extensiÃ³n"

  - id: "kpi_indicator"
    name: "Indicador KPI"
    states: ["critical", "warning", "stable"]
    transitions:
      - from: "stable"
        to: "warning"
        action: "Valor se acerca al umbral"
      - from: "warning"
        to: "critical"
        action: "Valor supera umbral crÃ­tico"

  - id: "survey"
    name: "Encuesta"
    states: ["draft", "published", "closed"]
    transitions:
      - from: "draft"
        to: "published"
        action: "Publicar encuesta"
      - from: "published"
        to: "closed"
        action: "Cerrar encuesta"

  - id: "organization"
    name: "OrganizaciÃ³n"
    states: ["active"]
    transitions: []

  - id: "bi_report"
    name: "Reporte BI"
    states: ["generated", "shared"]
    transitions:
      - from: "generated"
        to: "shared"
        action: "Compartir reporte"

  - id: "area"
    name: "Ãrea Organizacional"
    states: ["active", "archived"]
    transitions:
      - from: "active"
        to: "archived"
        action: "Archivar Ã¡rea"
      - from: "archived"
        to: "active"
        action: "Reactivar Ã¡rea"

  - id: "contact_lead"
    name: "Lead de Contacto"
    states: ["received", "contacted", "converted"]
    transitions:
      - from: "received"
        to: "contacted"
        action: "Contactar lead"
      - from: "contacted"
        to: "converted"
        action: "Convertir a cliente"

stories:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # FASE 0 â€” PREPARACIÃ“N (secuencial, antes de cualquier vista)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-P01: DefiniciÃ³n de Stack TecnolÃ³gico
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-P01"
    title: "Como equipo de desarrollo quiero definir el stack tecnolÃ³gico y la estructura del proyecto para tener una base sÃ³lida antes de implementar vistas."
    module: "global_state"
    priority: "critical"
    status: "implemented"
    sprint: 1
    flow_ids: ["FLOW-P01", "FLOW-P02"]
    acceptance_criteria:
      - id: "AC-001"
        description: "El proyecto usa Next.js 15 con App Router + TypeScript strict. La raÃ­z del proyecto es orq/ (no se crea subcarpeta)."
        validated: true
        flow_ids: ["FLOW-P01"]
      - id: "AC-002"
        description: "Se ha configurado Tailwind CSS como sistema de estilos, con tokens custom (colores, border-radius, tipografÃ­a) en tailwind.config."
        validated: true
        flow_ids: ["FLOW-P01"]
      - id: "AC-003"
        description: "Se ha instalado y configurado JSON Server como backend mock (db.json con datos iniciales, script en package.json)."
        validated: true
        flow_ids: ["FLOW-P01"]
      - id: "AC-004"
        description: "Se han instalado React Hook Form + Zod + @hookform/resolvers para validaciÃ³n de formularios."
        validated: true
        flow_ids: ["FLOW-P01"]
      - id: "AC-005"
        description: "El proyecto arranca en modo dev sin errores con npm run dev. JSON Server corre en paralelo (puerto 3001)."
        validated: true
        flow_ids: ["FLOW-P02"]
      - id: "AC-006"
        description: "Se ha definido la estructura de carpetas Next.js: app/ (rutas), components/, lib/, types/, mock/ (db.json)."
        validated: true
        flow_ids: ["FLOW-P01"]
      - id: "AC-007"
        description: "Se ha documentado la decisiÃ³n de stack en un archivo STACK.md con justificaciÃ³n de cada elecciÃ³n."
        validated: true
        flow_ids: ["FLOW-P01"]
      - id: "AC-008"
        description: "Se ha configurado el App Router con rutas base: / (landing), /dashboard, /organizacion, /usuarios, /extensiones, /contacto."
        validated: true
        flow_ids: ["FLOW-P02"]
      - id: "AC-009"
        description: "Se ha configurado ESLint + path aliases (@/) en tsconfig.json."
        validated: true
        flow_ids: ["FLOW-P01"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-P02: Design System y Look & Feel
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-P02"
    title: "Como equipo de desarrollo quiero implementar el design system basado en el mockup de Figma para garantizar consistencia visual en toda la plataforma."
    module: "app_shell"
    priority: "critical"
    status: "implemented"
    sprint: 1
    flow_ids: ["FLOW-P03", "FLOW-P04"]
    acceptance_criteria:
      - id: "AC-001"
        description: "Se han definido los CSS custom properties del design system: --primary (#2563EB), --primary-light (#EEF2FF), --accent-green (#16A34A), --accent-red (#DC2626), --surface (#FFFFFF), --bg (#F0F4FF), --text-primary (#0F172A), --text-secondary (#64748B), --text-muted (#94A3B8), --border (#E2E8F0), --cta-dark (#0F172A)."
        validated: true
        flow_ids: ["FLOW-P03"]
      - id: "AC-002"
        description: "Se ha configurado la tipografÃ­a con fonte Inter (o similar sans-serif moderna) desde Google Fonts."
        validated: true
        flow_ids: ["FLOW-P03"]
      - id: "AC-003"
        description: "Se han creado componentes base reutilizables: Button (primary, outline, dark, disabled), Badge (pill con variantes de color), Card (border-radius 12px, shadow sutil), Input (con icono opcional)."
        validated: true
        flow_ids: ["FLOW-P04"]
      - id: "AC-004"
        description: "Los border-radius son 12px para cards y 999px (pill) para badges."
        validated: true
        flow_ids: ["FLOW-P03"]
      - id: "AC-005"
        description: "Se ha definido la iconografÃ­a con estilo outlined/linear, color --primary, tamaÃ±o 20px para sidebar."
        validated: true
        flow_ids: ["FLOW-P03"]
      - id: "AC-006"
        description: "Existe un archivo o pÃ¡gina de showcase con todos los componentes base renderizados."
        validated: true
        flow_ids: ["FLOW-P04"]
      - id: "AC-007"
        description: "Los espaciados siguen el sistema del mockup: padding contenido 32px, gap entre cards 16px."
        validated: true
        flow_ids: ["FLOW-P03"]
      - id: "AC-008"
        description: "Se han implementado los patrones reutilizables: KPI Card, Extension Card, Table Row, Tree Item segÃºn mockup-figma.md."
        validated: true
        flow_ids: ["FLOW-P04"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-P03: Datos Mock Realistas
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-P03"
    title: "Como equipo quiero datos mock realistas y coherentes para que todas las vistas se puedan implementar con datos representativos desde el inicio."
    module: "global_state"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-P05", "FLOW-P06"]
    acceptance_criteria:
      - id: "AC-001"
        description: "Existen al menos 10 usuarios mock con nombres espaÃ±oles, emails @orquestra.com y telÃ©fonos +34 600 XXX XXX."
        validated: false
        flow_ids: ["FLOW-P05"]
      - id: "AC-002"
        description: "Existen al menos 14 Ã¡reas organizacionales mock con jerarquÃ­a (DirecciÃ³n General como raÃ­z), empleados y responsables."
        validated: false
        flow_ids: ["FLOW-P05"]
      - id: "AC-003"
        description: "Existen 5 extensiones mock: 3 disponibles (KPI, Formularios, Encuestas) y 2 prÃ³ximamente (ColaboraciÃ³n, BI)."
        validated: false
        flow_ids: ["FLOW-P05"]
      - id: "AC-004"
        description: "Existen 3 roles mock: Directivo (todos los permisos), Responsable de Ã¡rea (parcial), Colaborador (solo lectura)."
        validated: false
        flow_ids: ["FLOW-P06"]
      - id: "AC-005"
        description: "Los KPIs mock incluyen: Resumen organizaciÃ³n (12 Ã¡reas, 148 colaboradores), Actividad reciente (24 hoy, +18%), Estado del sistema (100% operativo)."
        validated: false
        flow_ids: ["FLOW-P05"]
      - id: "AC-006"
        description: "Cada entidad mock tiene IDs Ãºnicos y relaciones coherentes (usuarios asignados a Ã¡reas, Ã¡reas con responsables)."
        validated: false
        flow_ids: ["FLOW-P05"]
      - id: "AC-007"
        description: "Los datos se exportan desde un archivo centralizado (mock/data.ts) con tipos TypeScript."
        validated: false
        flow_ids: ["FLOW-P06"]
      - id: "AC-008"
        description: "El store React Context se inicializa con estos datos mock al montar la app."
        validated: false
        flow_ids: ["FLOW-P06"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # FASE 1 â€” VISTAS PRINCIPALES (secuencial)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-001: Landing Page Enterprise
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-001"
    title: "Como visitante quiero ver una landing page enterprise para entender las capacidades de Orquestra y acceder al demo."
    module: "landing"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-001", "FLOW-002", "FLOW-003"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La landing muestra un hero con H1 ('Convierte la operaciÃ³n de tu empresa en un sistema medible'), subtÃ­tulo descriptivo, mockup decorativo del dashboard y 2 CTAs."
        validated: false
        flow_ids: ["FLOW-001"]
      - id: "AC-002"
        description: "CTA primario 'Ver demo' (botÃ³n azul #2563EB pill) navega a /dashboard. CTA secundario 'Solicitar informaciÃ³n' (outline blanco) navega a /contacto."
        validated: false
        flow_ids: ["FLOW-001"]
      - id: "AC-003"
        description: "Existe una secciÃ³n 'Capacidades que se adaptan a tu operaciÃ³n' con 3 cards (icono lineal azul, tÃ­tulo, descripciÃ³n): Estructura empresarial, Indicadores KPI, ActivaciÃ³n inmediata."
        validated: false
        flow_ids: ["FLOW-002"]
      - id: "AC-004"
        description: "Existe una secciÃ³n CTA final con tÃ­tulo 'Â¿Listo para transformar tu operaciÃ³n?' y botÃ³n 'Solicitar informaciÃ³n'."
        validated: false
        flow_ids: ["FLOW-002"]
      - id: "AC-005"
        description: "El fondo general tiene gradiente azul sutil (#F0F4FF â†’ blanco)."
        validated: false
        flow_ids: ["FLOW-002"]
      - id: "AC-006"
        description: "La navbar sticky contiene logo ğŸ”µ Orquestra + 3 enlaces: Producto, Capacidades, Contacto."
        validated: false
        flow_ids: ["FLOW-003"]
      - id: "AC-007"
        description: "La pÃ¡gina es responsive y se adapta a mÃ³vil (>=320px) y desktop."
        validated: false
        flow_ids: ["FLOW-001"]
      - id: "AC-008"
        description: "El footer muestra copyright, links de tÃ©rminos/privacidad y aÃ±o actual."
        validated: false
        flow_ids: ["FLOW-003"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-002: App Shell y Layout Autenticado
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-002"
    title: "Como usuario autenticado quiero una estructura de layout con sidebar y header para navegar entre los mÃ³dulos de la plataforma."
    module: "app_shell"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-004", "FLOW-005", "FLOW-006", "FLOW-007"]
    acceptance_criteria:
      - id: "AC-001"
        description: "El AppLayout renderiza un sidebar izquierdo, header superior y Ã¡rea de contenido."
        validated: false
        flow_ids: ["FLOW-004"]
      - id: "AC-002"
        description: "El sidebar muestra 5 Ã­tems fijos de navegaciÃ³n: Inicio, OrganizaciÃ³n, Usuarios, Contenidos, Extensiones."
        validated: false
        flow_ids: ["FLOW-004"]
      - id: "AC-003"
        description: "El sidebar inyecta dinÃ¡micamente los mÃ³dulos de extensiones activas (KPI, Encuestas, BI)."
        validated: false
        flow_ids: ["FLOW-005"]
      - id: "AC-004"
        description: "El Ã­tem activo del sidebar se resalta con fondo azul claro #EEF2FF, texto e icono #2563EB."
        validated: false
        flow_ids: ["FLOW-004"]
      - id: "AC-005"
        description: "El sidebar ocupa ~240px con fondo blanco y borde derecho sutil."
        validated: false
        flow_ids: ["FLOW-006"]
      - id: "AC-006"
        description: "El logo ğŸ”µ Orquestra aparece en la esquina superior izquierda del sidebar y es clickeable."
        validated: false
        flow_ids: ["FLOW-007"]
      - id: "AC-007"
        description: "El header contiene un selector de rol/perfil 'Directivo â–¼' (dropdown) + icono ayuda (?) + icono mensajes (âœ‰ï¸)."
        validated: false
        flow_ids: ["FLOW-007"]
      - id: "AC-008"
        description: "El header muestra Ã­conos de utilidad: bÃºsqueda, notificaciones y ayuda."
        validated: false
        flow_ids: ["FLOW-007"]
      - id: "AC-009"
        description: "Cuando el rol cambia a Viewer, los Ã­tems de admin (Usuarios, Roles) desaparecen del sidebar."
        validated: false
        flow_ids: ["FLOW-005"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-003: Marketplace de Extensiones
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-003"
    title: "Como administrador quiero un marketplace de extensiones para explorar, activar y desactivar mÃ³dulos disponibles en la plataforma."
    module: "marketplace"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-008", "FLOW-009", "FLOW-010", "FLOW-011"]
    acceptance_criteria:
      - id: "AC-001"
        description: "El marketplace muestra todas las extensiones disponibles en formato grid de cards."
        validated: false
        flow_ids: ["FLOW-008"]
      - id: "AC-002"
        description: "Cada card muestra: Ã­cono, nombre, descripciÃ³n, categorÃ­a y badge de estado (Activa/Disponible)."
        validated: false
        flow_ids: ["FLOW-008"]
      - id: "AC-003"
        description: "El botÃ³n 'Habilitar' cambia la extensiÃ³n a estado 'active' y actualiza el store global."
        validated: false
        flow_ids: ["FLOW-009"]
      - id: "AC-004"
        description: "Al activar una extensiÃ³n, su mÃ³dulo aparece inmediatamente en el sidebar sin recargar."
        validated: false
        flow_ids: ["FLOW-009"]
      - id: "AC-005"
        description: "El botÃ³n 'Deshabilitar' revierte el estado y remueve el mÃ³dulo del sidebar."
        validated: false
        flow_ids: ["FLOW-010"]
      - id: "AC-006"
        description: "Un usuario con rol Viewer NO puede ver el botÃ³n de activar/desactivar."
        validated: false
        flow_ids: ["FLOW-011"]
      - id: "AC-007"
        description: "El marketplace muestra un contador de extensiones activas vs. totales en el header."
        validated: false
        flow_ids: ["FLOW-008"]
      - id: "AC-008"
        description: "Las extensiones activas muestran un borde/indicador visual verde diferenciado."
        validated: false
        flow_ids: ["FLOW-008"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-004: MÃ³dulo de Indicadores KPI
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-004"
    title: "Como gestor quiero un mÃ³dulo de indicadores KPI para monitorear mÃ©tricas clave del negocio con semÃ¡foro visual y creaciÃ³n dinÃ¡mica."
    module: "kpi"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-012", "FLOW-013", "FLOW-014", "FLOW-015"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La pÃ¡gina /modules/kpi lista todos los KPIs en formato card grid."
        validated: false
        flow_ids: ["FLOW-012"]
      - id: "AC-002"
        description: "Cada card KPI muestra: nombre, valor actual, meta, unidad y barra de progreso."
        validated: false
        flow_ids: ["FLOW-012"]
      - id: "AC-003"
        description: "El indicador semÃ¡foro muestra rojo (critical <70%), amarillo (warning 70-90%) y verde (stable >90%)."
        validated: false
        flow_ids: ["FLOW-012"]
      - id: "AC-004"
        description: "Existe un botÃ³n 'Crear KPI' que abre un modal con formulario (nombre, valor, meta, unidad)."
        validated: false
        flow_ids: ["FLOW-013"]
      - id: "AC-005"
        description: "Al crear un KPI, se agrega a la lista sin recargar la pÃ¡gina."
        validated: false
        flow_ids: ["FLOW-013"]
      - id: "AC-006"
        description: "Si la extensiÃ³n KPI no estÃ¡ activa, navegar a /modules/kpi redirige al marketplace."
        validated: false
        flow_ids: ["FLOW-014"]
      - id: "AC-007"
        description: "Un usuario Viewer puede ver los KPIs pero NO el botÃ³n de crear."
        validated: false
        flow_ids: ["FLOW-015"]
      - id: "AC-008"
        description: "Los KPIs mock incluyen al menos 4 indicadores variados (ingresos, satisfacciÃ³n, ticket promedio, retenciÃ³n)."
        validated: false
        flow_ids: ["FLOW-012"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-005: MÃ³dulo de Encuestas
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-005"
    title: "Como gestor quiero un mÃ³dulo de encuestas para crear, distribuir y ver resultados de encuestas de satisfacciÃ³n."
    module: "surveys"
    priority: "medium"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-016", "FLOW-017", "FLOW-018"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La pÃ¡gina /modules/surveys lista las encuestas existentes en cards."
        validated: false
        flow_ids: ["FLOW-016"]
      - id: "AC-002"
        description: "Cada card muestra: tÃ­tulo, estado (borrador/publicada/cerrada), total de respuestas y fecha."
        validated: false
        flow_ids: ["FLOW-016"]
      - id: "AC-003"
        description: "Existe un botÃ³n 'Crear Encuesta' que abre un formulario/modal."
        validated: false
        flow_ids: ["FLOW-017"]
      - id: "AC-004"
        description: "Al clicar en una encuesta publicada se muestran resultados con grÃ¡fica de barras mock."
        validated: false
        flow_ids: ["FLOW-018"]
      - id: "AC-005"
        description: "Si la extensiÃ³n Surveys no estÃ¡ activa, navegar a /modules/surveys redirige al marketplace."
        validated: false
        flow_ids: ["FLOW-016"]
      - id: "AC-006"
        description: "Los datos mock incluyen al menos 3 encuestas con diferentes estados."
        validated: false
        flow_ids: ["FLOW-016"]
      - id: "AC-007"
        description: "Las encuestas en estado 'borrador' muestran un badge gris, 'publicada' muestra verde, 'cerrada' muestra rojo."
        validated: false
        flow_ids: ["FLOW-016"]
      - id: "AC-008"
        description: "Solo admin y manager pueden crear encuestas; viewer solo puede ver resultados."
        validated: false
        flow_ids: ["FLOW-017"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-006: MÃ³dulo de Tableros BI
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-006"
    title: "Como gestor quiero tableros de BI con grÃ¡ficas interactivas para analizar datos del negocio visualmente."
    module: "bi"
    priority: "medium"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-019", "FLOW-020", "FLOW-021"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La pÃ¡gina /modules/bi muestra un dashboard con al menos 3 grÃ¡ficas (barras, lÃ­neas, donut)."
        validated: false
        flow_ids: ["FLOW-019"]
      - id: "AC-002"
        description: "Las grÃ¡ficas usan datos mock realistas (ventas mensuales, distribuciÃ³n por categorÃ­a, tendencia)."
        validated: false
        flow_ids: ["FLOW-019"]
      - id: "AC-003"
        description: "Existe un botÃ³n 'Descargar Reporte' (acciÃ³n mock con feedback visual)."
        validated: false
        flow_ids: ["FLOW-020"]
      - id: "AC-004"
        description: "Existe un botÃ³n 'Compartir' reporte (acciÃ³n mock con toast/notificaciÃ³n)."
        validated: false
        flow_ids: ["FLOW-020"]
      - id: "AC-005"
        description: "Si la extensiÃ³n BI no estÃ¡ activa, navegar a /modules/bi redirige al marketplace."
        validated: false
        flow_ids: ["FLOW-021"]
      - id: "AC-006"
        description: "Las grÃ¡ficas son interactivas (hover muestra tooltips con valores)."
        validated: false
        flow_ids: ["FLOW-019"]
      - id: "AC-007"
        description: "El layout del dashboard BI usa grid responsivo de 2 columnas en desktop."
        validated: false
        flow_ids: ["FLOW-019"]
      - id: "AC-008"
        description: "Cada card de grÃ¡fica tiene tÃ­tulo descriptivo y perÃ­odo de datos ('Ãšltimos 6 meses', etc.)."
        validated: false
        flow_ids: ["FLOW-019"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-007: GestiÃ³n de Usuarios
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-007"
    title: "Como administrador quiero gestionar los usuarios de la organizaciÃ³n para controlar quiÃ©n accede al sistema y con quÃ© permisos."
    module: "user_management"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-022", "FLOW-023", "FLOW-024", "FLOW-025"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La pÃ¡gina /admin/users muestra una tabla con: nombre, email, rol(es), grupo(s) y estado."
        validated: false
        flow_ids: ["FLOW-022"]
      - id: "AC-002"
        description: "Existe un campo de bÃºsqueda que filtra usuarios por nombre o email en tiempo real."
        validated: false
        flow_ids: ["FLOW-022"]
      - id: "AC-003"
        description: "La pÃ¡gina muestra estadÃ­sticas resumen: total usuarios, activos, inactivos."
        validated: false
        flow_ids: ["FLOW-022"]
      - id: "AC-004"
        description: "Al hacer clic en un usuario se abre un panel de detalle o modal para ediciÃ³n."
        validated: false
        flow_ids: ["FLOW-023"]
      - id: "AC-005"
        description: "Desde el detalle se pueden asignar/remover roles al usuario mediante chips seleccionables."
        validated: false
        flow_ids: ["FLOW-023"]
      - id: "AC-006"
        description: "Existe un botÃ³n 'Crear Usuario' que abre formulario con campos: nombre, email, rol, grupo."
        validated: false
        flow_ids: ["FLOW-024"]
      - id: "AC-007"
        description: "Se puede cambiar el estado de un usuario entre activo/inactivo desde la lista."
        validated: false
        flow_ids: ["FLOW-025"]
      - id: "AC-008"
        description: "Solo usuarios con rol Admin ven la secciÃ³n de administraciÃ³n de usuarios."
        validated: false
        flow_ids: ["FLOW-022"]
      - id: "AC-009"
        description: "Los datos mock incluyen al menos 5 usuarios con roles y grupos variados."
        validated: false
        flow_ids: ["FLOW-022"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-008: Roles y Permisos
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-008"
    title: "Como administrador quiero definir roles con permisos granulares para controlar el acceso a cada funcionalidad de la plataforma."
    module: "roles_permissions"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-026", "FLOW-027", "FLOW-028"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La pÃ¡gina /admin/roles muestra una tabla de roles existentes (Admin, Gestor, Viewer)."
        validated: false
        flow_ids: ["FLOW-026"]
      - id: "AC-002"
        description: "Cada rol muestra un badge con la cantidad de usuarios asignados."
        validated: false
        flow_ids: ["FLOW-026"]
      - id: "AC-003"
        description: "Al clicar un rol, se abre una vista de detalle con la matriz de permisos (checkboxes por permiso)."
        validated: false
        flow_ids: ["FLOW-027"]
      - id: "AC-004"
        description: "Los permisos incluyen al menos: view_kpi, edit_kpi, view_surveys, edit_surveys, view_bi, activate_extensions, manage_users, manage_roles."
        validated: false
        flow_ids: ["FLOW-027"]
      - id: "AC-005"
        description: "Existe un botÃ³n 'Crear Rol' que permite definir un nuevo rol con nombre y permisos seleccionados."
        validated: false
        flow_ids: ["FLOW-028"]
      - id: "AC-006"
        description: "La UI refleja los permisos del rol Admin marcando todos los checkboxes como activos."
        validated: false
        flow_ids: ["FLOW-027"]
      - id: "AC-007"
        description: "El rol Viewer tiene solo permisos de lectura (view_*) activos en la matriz."
        validated: false
        flow_ids: ["FLOW-027"]
      - id: "AC-008"
        description: "Un rol no puede eliminarse si tiene usuarios asignados (feedback visual de error)."
        validated: false
        flow_ids: ["FLOW-026"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-009: Grupos de Usuarios
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-009"
    title: "Como administrador quiero organizar usuarios en grupos para simplificar la asignaciÃ³n de permisos por departamento o funciÃ³n."
    module: "user_groups"
    priority: "medium"
    status: "pending"
    sprint: 2
    flow_ids: ["FLOW-029", "FLOW-030", "FLOW-031"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La pÃ¡gina /admin/groups muestra una lista de grupos con nombre, descripciÃ³n y cantidad de miembros."
        validated: false
        flow_ids: ["FLOW-029"]
      - id: "AC-002"
        description: "Existe un botÃ³n 'Crear Grupo' que abre formulario con nombre, descripciÃ³n y rol por defecto."
        validated: false
        flow_ids: ["FLOW-030"]
      - id: "AC-003"
        description: "Al clicar un grupo se ve la lista de miembros con opciÃ³n de agregar/remover usuarios."
        validated: false
        flow_ids: ["FLOW-031"]
      - id: "AC-004"
        description: "Los datos mock incluyen al menos 3 grupos (DirecciÃ³n, Operaciones, Marketing)."
        validated: false
        flow_ids: ["FLOW-029"]
      - id: "AC-005"
        description: "Al asignar un usuario a un grupo, hereda el rol por defecto del grupo."
        validated: false
        flow_ids: ["FLOW-031"]
      - id: "AC-006"
        description: "Un grupo puede archivarse (no eliminarse), con feedback visual correspondiente."
        validated: false
        flow_ids: ["FLOW-029"]
      - id: "AC-007"
        description: "Cada grupo muestra un avatar coloreado con la inicial del nombre."
        validated: false
        flow_ids: ["FLOW-029"]
      - id: "AC-008"
        description: "Solo usuarios con rol Admin pueden acceder a /admin/groups."
        validated: false
        flow_ids: ["FLOW-029"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-010: Dashboard Principal
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-010"
    title: "Como usuario autenticado quiero un dashboard principal con resumen de mÃ©tricas y accesos rÃ¡pidos para tener visibilidad instantÃ¡nea del estado de la organizaciÃ³n."
    module: "dashboard"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-032", "FLOW-033", "FLOW-034"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La pÃ¡gina /dashboard muestra un saludo con el nombre del usuario actual y su rol."
        validated: false
        flow_ids: ["FLOW-032"]
      - id: "AC-002"
        description: "El dashboard muestra widgets de resumen (usuarios activos, extensiones habilitadas, KPIs crÃ­ticos)."
        validated: false
        flow_ids: ["FLOW-032"]
      - id: "AC-003"
        description: "Si el mÃ³dulo KPI estÃ¡ activo, se muestran los 3 principales KPIs como widgets-resumen."
        validated: false
        flow_ids: ["FLOW-033"]
      - id: "AC-004"
        description: "Existen accesos rÃ¡pidos (quick links) a los mÃ³dulos activos."
        validated: false
        flow_ids: ["FLOW-032"]
      - id: "AC-005"
        description: "El dashboard adapta su contenido segÃºn las extensiones activas (no muestra widgets de extensiones desactivadas)."
        validated: false
        flow_ids: ["FLOW-033"]
      - id: "AC-006"
        description: "Muestra una mini grÃ¡fica de actividad reciente (datos mock de Ãºltimos 7 dÃ­as)."
        validated: false
        flow_ids: ["FLOW-034"]
      - id: "AC-007"
        description: "El layout usa grid responsivo con cards de ancho uniforme y spacing enterprise."
        validated: false
        flow_ids: ["FLOW-032"]
      - id: "AC-008"
        description: "Cada card resumen tiene Ã­cono, label, valor numÃ©rico y % de cambio vs. periodo anterior."
        validated: false
        flow_ids: ["FLOW-032"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-011: Estado Global y Reactividad
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-011"
    title: "Como desarrollador quiero un estado global reactivo (React Context) para que los cambios de rol, extensiones y usuario se reflejen inmediatamente en toda la aplicaciÃ³n."
    module: "global_state"
    priority: "high"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-035", "FLOW-036", "FLOW-037", "FLOW-038"]
    acceptance_criteria:
      - id: "AC-001"
        description: "El store React Context expone: currentUser, currentRole, activeExtensions, organization."
        validated: false
        flow_ids: ["FLOW-035"]
      - id: "AC-002"
        description: "El store provee acciÃ³n setRole() que actualiza currentRole y refresca el sidebar."
        validated: false
        flow_ids: ["FLOW-036"]
      - id: "AC-003"
        description: "El store provee acciÃ³n toggleExtension() que activa/desactiva una extensiÃ³n y actualiza sidebar."
        validated: false
        flow_ids: ["FLOW-037"]
      - id: "AC-004"
        description: "Al cambiar rol en el header, las rutas de admin se ocultan si el rol no tiene permisos."
        validated: false
        flow_ids: ["FLOW-036"]
      - id: "AC-005"
        description: "Al desactivar una extensiÃ³n desde el marketplace, si el usuario estÃ¡ en esa ruta, se redirige a /dashboard."
        validated: false
        flow_ids: ["FLOW-037"]
      - id: "AC-006"
        description: "Los datos iniciales del store se cargan desde los datos mock (no requiere API real)."
        validated: false
        flow_ids: ["FLOW-035"]
      - id: "AC-007"
        description: "El store es accesible desde cualquier componente client-side via hook useStore()."
        validated: false
        flow_ids: ["FLOW-035"]
      - id: "AC-008"
        description: "Al cambiar de organizaciÃ³n (si se extendiera), el store resetea extensiones y usuarios."
        validated: false
        flow_ids: ["FLOW-038"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-012: Datos Mock Realistas
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-012"
    title: "Como Ğ´ĞµĞ¼Ğ¾-reviewer quiero datos mock realistas y coherentes para evaluar la plataforma como si estuviera en producciÃ³n."
    module: "global_state"
    priority: "medium"
    status: "pending"
    sprint: 1
    flow_ids: ["FLOW-039", "FLOW-040"]
    acceptance_criteria:
      - id: "AC-001"
        description: "Existen al menos 5 usuarios mock con nombres, emails y roles variados."
        validated: false
        flow_ids: ["FLOW-039"]
      - id: "AC-002"
        description: "Existen al menos 3 extensiones mock (KPI, Encuestas, BI) con metadatos completos."
        validated: false
        flow_ids: ["FLOW-039"]
      - id: "AC-003"
        description: "Existen al menos 4 KPIs mock con valores, metas y estados variados."
        validated: false
        flow_ids: ["FLOW-039"]
      - id: "AC-004"
        description: "Existen al menos 3 encuestas mock con estados diferentes (borrador, publicada, cerrada)."
        validated: false
        flow_ids: ["FLOW-039"]
      - id: "AC-005"
        description: "Los datos de grÃ¡ficas BI son arrays numÃ©ricos con 6-12 puntos de datos realistas."
        validated: false
        flow_ids: ["FLOW-039"]
      - id: "AC-006"
        description: "Existen al menos 3 grupos mock (DirecciÃ³n, Operaciones, Marketing) con miembros."
        validated: false
        flow_ids: ["FLOW-039"]
      - id: "AC-007"
        description: "Hay al menos 3 roles mock con permisos diferentes (Admin=todo, Gestor=parcial, Viewer=lectura)."
        validated: false
        flow_ids: ["FLOW-040"]
      - id: "AC-008"
        description: "Cada entidad mock tiene IDs Ãºnicos y relaciones coherentes entre sÃ­."
        validated: false
        flow_ids: ["FLOW-039"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # FASE 2 â€” MÃ“DULOS NUEVOS (del mockup Figma)
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-013: GestiÃ³n de OrganizaciÃ³n
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-013"
    title: "Como administrador quiero gestionar la estructura jerÃ¡rquica de la organizaciÃ³n (Ã¡reas, departamentos) para reflejar el organigrama real de la empresa."
    module: "organization_mgmt"
    priority: "high"
    status: "pending"
    sprint: 2
    flow_ids: ["FLOW-041", "FLOW-042", "FLOW-043", "FLOW-044"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La ruta /organizacion muestra H1 'OrganizaciÃ³n', subtÃ­tulo 'Gestiona la estructura jerÃ¡rquica' y 3 KPI cards (Total Ã¡reas: 12, Colaboradores: 148, Actividad reciente: 24 hoy)."
        validated: false
        flow_ids: ["FLOW-041"]
      - id: "AC-002"
        description: "Existe un tree list expandible con Ã¡reas jerÃ¡rquicas: raÃ­z 'DirecciÃ³n General' y sub-Ã¡reas como Recursos Humanos, Finanzas, etc."
        validated: false
        flow_ids: ["FLOW-041"]
      - id: "AC-003"
        description: "Cada nodo del Ã¡rbol muestra: nombre del Ã¡rea, nombre del responsable, nÃºmero de empleados y chevron para expandir/colapsar."
        validated: false
        flow_ids: ["FLOW-041"]
      - id: "AC-004"
        description: "Al expandir un Ã¡rea, se muestran sus sub-Ã¡reas con indentaciÃ³n visual progresiva."
        validated: false
        flow_ids: ["FLOW-042"]
      - id: "AC-005"
        description: "Existe un botÃ³n 'Nueva Ãrea' que abre un formulario para crear Ã¡rea con: nombre, responsable, Ã¡rea padre."
        validated: false
        flow_ids: ["FLOW-043"]
      - id: "AC-006"
        description: "Los datos mock incluyen al menos 14 Ã¡reas con jerarquÃ­a de 3 niveles de profundidad."
        validated: false
        flow_ids: ["FLOW-041"]
      - id: "AC-007"
        description: "Solo usuarios con rol Directivo o Responsable de Ã¡rea pueden editar la estructura."
        validated: false
        flow_ids: ["FLOW-044"]
      - id: "AC-008"
        description: "Se puede hacer clic en un Ã¡rea para ver detalle con lista de empleados asignados."
        validated: false
        flow_ids: ["FLOW-044"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-014: PÃ¡gina de Contacto
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-014"
    title: "Como visitante o usuario quiero acceder a una pÃ¡gina de contacto para solicitar informaciÃ³n, agendar una demo o comunicarme con el equipo."
    module: "contact"
    priority: "medium"
    status: "pending"
    sprint: 2
    flow_ids: ["FLOW-045", "FLOW-046"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La ruta /contacto muestra un layout a 2 columnas: formulario (izq) + info de contacto (der)."
        validated: false
        flow_ids: ["FLOW-045"]
      - id: "AC-002"
        description: "El formulario incluye campos: Nombre completo, Correo electrÃ³nico, Empresa, Mensaje (textarea), todos obligatorios."
        validated: false
        flow_ids: ["FLOW-045"]
      - id: "AC-003"
        description: "BotÃ³n submit 'Enviar mensaje' (azul #2563EB, pill, ancho completo). Al enviar muestra feedback de Ã©xito."
        validated: false
        flow_ids: ["FLOW-045"]
      - id: "AC-004"
        description: "La columna derecha muestra: horario de atenciÃ³n (Lunes a Viernes, 9:00 - 18:00), email info@orquestra.com, telÃ©fono +34 900 123 456."
        validated: false
        flow_ids: ["FLOW-046"]
      - id: "AC-005"
        description: "Existe un CTA adicional 'Â¿Prefieres una demo personalizada?' con enlace para agendar."
        validated: false
        flow_ids: ["FLOW-046"]
      - id: "AC-006"
        description: "Los campos tienen validaciÃ³n frontend: email vÃ¡lido, campos no vacÃ­os."
        validated: false
        flow_ids: ["FLOW-045"]

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # US-015: ExtensiÃ³n Formularios
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  - id: "US-015"
    title: "Como administrador quiero una extensiÃ³n de Formularios en el marketplace para recopilar informaciÃ³n del equipo mediante formularios personalizados."
    module: "forms"
    priority: "medium"
    status: "pending"
    sprint: 2
    flow_ids: ["FLOW-047", "FLOW-048"]
    acceptance_criteria:
      - id: "AC-001"
        description: "La extensiÃ³n 'Formularios' aparece en el marketplace con card: icono, descripciÃ³n 'Crea formularios personalizados', badge 'Disponible'."
        validated: false
        flow_ids: ["FLOW-047"]
      - id: "AC-002"
        description: "Al activar la extensiÃ³n, aparece 'Formularios' como sub-Ã­tem en el sidebar bajo 'Contenidos'."
        validated: false
        flow_ids: ["FLOW-047"]
      - id: "AC-003"
        description: "La vista /formularios muestra lista de formularios creados con nombre, estado y fecha."
        validated: false
        flow_ids: ["FLOW-048"]
      - id: "AC-004"
        description: "Existe botÃ³n 'Nuevo formulario' para crear formularios con tÃ­tulo y campos configurables."
        validated: false
        flow_ids: ["FLOW-048"]
      - id: "AC-005"
        description: "Los datos mock incluyen al menos 2 formularios: 'Encuesta de clima laboral' y 'Solicitud de vacaciones'."
        validated: false
        flow_ids: ["FLOW-048"]
      - id: "AC-006"
        description: "Al desactivar la extensiÃ³n, 'Formularios' desaparece del sidebar y redirige a /dashboard."
        validated: false
        flow_ids: ["FLOW-047"]

flows:
  # â”€â”€â”€ LANDING PAGE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-001"
    name: "Visualizar Hero y CTA principal"
    type: "user_flow"
    module: "landing"
    actor: "visitante"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-001"
    story_points: 3
    entities: []
    trigger: "El visitante accede a la URL raÃ­z (/)"
    preconditions: ["Ninguna"]
    steps:
      - "El visitante accede a la URL raÃ­z"
      - "El sistema renderiza el hero section con tÃ­tulo, subtÃ­tulo, badge 'Enterprise v2.0' y botÃ³n CTA"
      - "El visitante hace clic en 'Comenzar ahora'"
      - "El sistema navega a /marketplace"
    alternatives:
      - "Si el visitante hace clic en 'Hablar con Ventas', se muestra un modal de contacto (mock)"
    errors: []

  - id: "FLOW-002"
    name: "Explorar secciones informativas"
    type: "user_flow"
    module: "landing"
    actor: "visitante"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-001"
    story_points: 3
    entities: []
    trigger: "El visitante hace scroll en la landing page"
    preconditions: ["El visitante estÃ¡ en /"]
    steps:
      - "El visitante hace scroll hacia abajo"
      - "Aparece la secciÃ³n de beneficios con 6 cards (Ã­cono, tÃ­tulo, descripciÃ³n)"
      - "Aparece la secciÃ³n 'CÃ³mo Funciona' con 3 pasos numerados"
      - "Aparece la secciÃ³n de extensiones destacadas con preview de KPI, Encuestas y BI"
      - "Aparece el CTA final con fondo oscuro y botÃ³n de acciÃ³n"
    alternatives: []
    errors: []

  - id: "FLOW-003"
    name: "Navegar desde la barra sticky"
    type: "user_flow"
    module: "landing"
    actor: "visitante"
    priority: "low"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-001"
    story_points: 1
    entities: []
    trigger: "El visitante interactÃºa con la navbar sticky"
    preconditions: ["El visitante estÃ¡ en /"]
    steps:
      - "El visitante carga la pÃ¡gina y ve la navbar fija con logo y links"
      - "Al hacer clic en 'CaracterÃ­sticas' se navega con scroll suave a la secciÃ³n de features"
      - "Al hacer clic en 'Ir al Demo' se navega a /marketplace"
    alternatives: []
    errors: []

  # â”€â”€â”€ APP SHELL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-004"
    name: "Renderizar layout con sidebar y header"
    type: "user_flow"
    module: "app_shell"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-002"
    story_points: 5
    entities: ["user", "role"]
    trigger: "El usuario navega a cualquier pÃ¡gina interna (ej. /dashboard)"
    preconditions: ["El usuario tiene rol asignado en el store"]
    steps:
      - "El sistema renderiza AppLayout con sidebar izquierdo"
      - "El sidebar muestra: Logo, Dashboard, Marketplace, y secciÃ³n Admin (si aplica)"
      - "El header superior muestra nombre de organizaciÃ³n, selector de rol y utilidades"
      - "El Ã¡rea de contenido principal renderiza la pÃ¡gina hija correspondiente"
      - "El Ã­tem de navegaciÃ³n actual se resalta con borde izquierdo y fondo activo"
    alternatives: []
    errors: []

  - id: "FLOW-005"
    name: "Actualizar sidebar dinÃ¡micamente por extensiones y rol"
    type: "system_flow"
    module: "app_shell"
    actor: "system"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-002"
    story_points: 5
    entities: ["extension", "role"]
    trigger: "El store de extensiones activas o el rol actual cambia"
    preconditions: ["El AppLayout estÃ¡ montado"]
    steps:
      - "El componente Sidebar se suscribe al store Zustand (activeExtensions, currentRole)"
      - "El sidebar recalcula los Ã­tems visibles: fijos + extensiones activas + admin (si rol es Admin/Manager)"
      - "Los Ã­tems de extensiones inactivas dejan de mostrarse instantÃ¡neamente"
      - "Si el rol es Viewer, las secciones de admin (Usuarios, Roles, Grupos) se ocultan"
    alternatives:
      - "Si no hay extensiones activas, el sidebar solo muestra Dashboard y Marketplace"
    errors: []

  - id: "FLOW-006"
    name: "Colapsar y expandir sidebar"
    type: "user_flow"
    module: "app_shell"
    actor: "admin"
    priority: "low"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-002"
    story_points: 2
    entities: []
    trigger: "El usuario hace clic en el botÃ³n de colapsar del sidebar"
    preconditions: ["El sidebar estÃ¡ visible"]
    steps:
      - "El usuario hace clic en el Ã­cono de colapsar (chevron)"
      - "El sidebar se reduce a un ancho mÃ­nimo mostrando solo Ã­conos"
      - "Los labels de navegaciÃ³n se ocultan con animaciÃ³n"
      - "El usuario hace clic de nuevo para expandir"
      - "El sidebar vuelve a su ancho completo con labels visibles"
    alternatives: []
    errors: []

  - id: "FLOW-007"
    name: "Interactuar con el header bar"
    type: "user_flow"
    module: "app_shell"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-002"
    story_points: 3
    entities: ["user", "role", "organization"]
    trigger: "El usuario interactÃºa con el header bar"
    preconditions: ["El AppLayout estÃ¡ montado"]
    steps:
      - "El header muestra el nombre de la organizaciÃ³n actual"
      - "El selector de rol muestra el rol actual seleccionado"
      - "El usuario selecciona un rol diferente del dropdown"
      - "El store se actualiza con setRole() y toda la UI reacciona"
      - "Los Ã­conos de bÃºsqueda, notificaciones y ayuda muestran tooltips al hover"
    alternatives: []
    errors: []

  # â”€â”€â”€ MARKETPLACE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-008"
    name: "Ver catÃ¡logo de extensiones"
    type: "user_flow"
    module: "marketplace"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-003"
    story_points: 3
    entities: ["extension"]
    trigger: "El usuario navega a /marketplace"
    preconditions: ["El usuario tiene rol Admin"]
    steps:
      - "El sistema carga la lista de extensiones desde data mock"
      - "Se renderizan cards en grid con Ã­cono, nombre, descripciÃ³n, categorÃ­a"
      - "Cada card muestra un badge: 'Activa' (verde) o 'Disponible' (gris)"
      - "El header del marketplace muestra contador: 'X de Y extensiones activas'"
    alternatives: []
    errors: []

  - id: "FLOW-009"
    name: "Activar una extensiÃ³n"
    type: "user_flow"
    module: "marketplace"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-003"
    story_points: 5
    entities: ["extension"]
    trigger: "El admin hace clic en 'Habilitar' en una extensiÃ³n disponible"
    preconditions: ["El usuario tiene rol Admin", "La extensiÃ³n no estÃ¡ activa"]
    steps:
      - "El admin hace clic en el botÃ³n 'Habilitar' de la extensiÃ³n"
      - "El sistema llama a toggleExtension(extensionId) en el store"
      - "El badge cambia de 'Disponible' a 'Activa' con animaciÃ³n"
      - "El sidebar se actualiza aÃ±adiendo el nuevo mÃ³dulo en la secciÃ³n de extensiones"
      - "El contador de extensiones activas en el header se incrementa"
    alternatives: []
    errors: []

  - id: "FLOW-010"
    name: "Desactivar una extensiÃ³n"
    type: "user_flow"
    module: "marketplace"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-003"
    story_points: 3
    entities: ["extension"]
    trigger: "El admin hace clic en 'Deshabilitar' en una extensiÃ³n activa"
    preconditions: ["La extensiÃ³n estÃ¡ activa"]
    steps:
      - "El admin hace clic en el botÃ³n 'Deshabilitar'"
      - "El sistema llama a toggleExtension(extensionId) para desactivar"
      - "El badge cambia de 'Activa' a 'Disponible'"
      - "El sidebar remueve el mÃ³dulo correspondiente"
      - "Si el usuario estaba en la ruta de esa extensiÃ³n, se redirige a /dashboard"
    alternatives: []
    errors: []

  - id: "FLOW-011"
    name: "RestricciÃ³n de marketplace por rol"
    type: "business_flow"
    module: "marketplace"
    actor: "viewer"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-003"
    story_points: 2
    entities: ["role", "extension"]
    trigger: "Un usuario con rol Viewer navega al marketplace"
    preconditions: ["El rol actual es Viewer"]
    steps:
      - "El usuario Viewer accede a /marketplace"
      - "El sistema renderiza las cards de extensiones en modo solo lectura"
      - "Los botones 'Habilitar/Deshabilitar' no se muestran para rol Viewer"
      - "El usuario puede ver el catÃ¡logo pero no modificar nada"
    alternatives: []
    errors: []

  # â”€â”€â”€ MÃ“DULO KPI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-012"
    name: "Listar KPIs con semÃ¡foro visual"
    type: "user_flow"
    module: "kpi"
    actor: "manager"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-004"
    story_points: 3
    entities: ["kpi_indicator"]
    trigger: "El usuario navega a /modules/kpi"
    preconditions: ["ExtensiÃ³n KPI estÃ¡ activa"]
    steps:
      - "El sistema verifica que la extensiÃ³n KPI estÃ¡ activa en el store"
      - "Se cargan los KPIs desde mock data"
      - "Se renderizan cards con: nombre, valor, meta, barra de progreso"
      - "El indicador semÃ¡foro se calcula: rojo (<70%), amarillo (70-90%), verde (>90%)"
    alternatives: []
    errors: []

  - id: "FLOW-013"
    name: "Crear nuevo KPI via modal"
    type: "user_flow"
    module: "kpi"
    actor: "manager"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-004"
    story_points: 3
    entities: ["kpi_indicator"]
    trigger: "El gestor hace clic en 'Crear KPI'"
    preconditions: ["ExtensiÃ³n KPI activa", "Rol es Admin o Manager"]
    steps:
      - "El usuario hace clic en 'Crear KPI'"
      - "Se abre un modal con campos: nombre, valor actual, meta, unidad"
      - "El usuario completa el formulario y hace clic en 'Guardar'"
      - "El KPI se agrega a la lista local (sin backend, push al array)"
      - "El modal se cierra y el nuevo KPI aparece con su semÃ¡foro calculado"
    alternatives:
      - "Si el usuario cancela el modal, no se crea nada"
    errors:
      - "Si nombre estÃ¡ vacÃ­o, se muestra error de validaciÃ³n"

  - id: "FLOW-014"
    name: "Proteger ruta KPI por extensiÃ³n activa"
    type: "system_flow"
    module: "kpi"
    actor: "system"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-004"
    story_points: 2
    entities: ["extension"]
    trigger: "Un usuario intenta navegar a /modules/kpi"
    preconditions: ["La extensiÃ³n KPI NO estÃ¡ activa"]
    steps:
      - "El sistema verifica activeExtensions en el store"
      - "La extensiÃ³n 'kpi' no estÃ¡ en la lista de activas"
      - "El sistema redirige al usuario a /marketplace con un mensaje indicativo"
    alternatives: []
    errors: []

  - id: "FLOW-015"
    name: "Restringir creaciÃ³n de KPI por rol"
    type: "business_flow"
    module: "kpi"
    actor: "viewer"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-004"
    story_points: 1
    entities: ["role", "kpi_indicator"]
    trigger: "Un Viewer accede a /modules/kpi"
    preconditions: ["Rol actual es Viewer", "ExtensiÃ³n KPI activa"]
    steps:
      - "El Viewer accede a la pÃ¡gina de KPIs"
      - "Ve las cards de KPIs en modo solo lectura"
      - "El botÃ³n 'Crear KPI' NO se renderiza"
    alternatives: []
    errors: []

  # â”€â”€â”€ MÃ“DULO ENCUESTAS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-016"
    name: "Listar encuestas con estados"
    type: "user_flow"
    module: "surveys"
    actor: "manager"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-005"
    story_points: 3
    entities: ["survey"]
    trigger: "El usuario navega a /modules/surveys"
    preconditions: ["ExtensiÃ³n Surveys activa"]
    steps:
      - "El sistema verifica que Surveys estÃ¡ activa"
      - "Se cargan las encuestas desde mock data"
      - "Cards muestran: tÃ­tulo, estado (badge color), respuestas, fecha"
      - "Badge gris=borrador, verde=publicada, rojo=cerrada"
    alternatives:
      - "Si extensiÃ³n Surveys no estÃ¡ activa, redirige a /marketplace"
    errors: []

  - id: "FLOW-017"
    name: "Crear nueva encuesta"
    type: "user_flow"
    module: "surveys"
    actor: "manager"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-005"
    story_points: 3
    entities: ["survey"]
    trigger: "El gestor hace clic en 'Crear Encuesta'"
    preconditions: ["Rol Admin o Manager", "ExtensiÃ³n Surveys activa"]
    steps:
      - "El usuario hace clic en 'Crear Encuesta'"
      - "Se abre modal/formulario con campos: tÃ­tulo, descripciÃ³n"
      - "El usuario completa y guarda"
      - "La encuesta se crea en estado 'borrador' y aparece en la lista"
    alternatives: []
    errors: []

  - id: "FLOW-018"
    name: "Ver resultados de encuesta publicada"
    type: "user_flow"
    module: "surveys"
    actor: "manager"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-005"
    story_points: 3
    entities: ["survey"]
    trigger: "El usuario hace clic en una encuesta con estado 'publicada'"
    preconditions: ["La encuesta estÃ¡ en estado publicada"]
    steps:
      - "El usuario hace clic en la card de encuesta"
      - "Se abre una vista de detalle con grÃ¡fica de barras de resultados"
      - "Los datos son mock pero representan distribuciÃ³n de respuestas"
      - "Se muestra total de respuestas y % por opciÃ³n"
    alternatives: []
    errors: []

  # â”€â”€â”€ MÃ“DULO BI â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-019"
    name: "Visualizar dashboard BI con grÃ¡ficas"
    type: "user_flow"
    module: "bi"
    actor: "manager"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-006"
    story_points: 5
    entities: ["bi_report"]
    trigger: "El usuario navega a /modules/bi"
    preconditions: ["ExtensiÃ³n BI activa"]
    steps:
      - "El sistema verifica que BI estÃ¡ activa"
      - "Se renderiza un grid 2 columnas con cards de grÃ¡ficas"
      - "Card 1: grÃ¡fica de barras (Ventas mensuales)"
      - "Card 2: grÃ¡fica de lÃ­neas (Tendencia anual)"
      - "Card 3: grÃ¡fica de donut (DistribuciÃ³n por categorÃ­a)"
      - "Cada grÃ¡fica muestra tooltips al hover con valores exactos"
    alternatives: []
    errors: []

  - id: "FLOW-020"
    name: "Descargar y compartir reporte BI"
    type: "user_flow"
    module: "bi"
    actor: "manager"
    priority: "low"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-006"
    story_points: 2
    entities: ["bi_report"]
    trigger: "El usuario hace clic en 'Descargar' o 'Compartir'"
    preconditions: ["El dashboard BI estÃ¡ renderizado"]
    steps:
      - "El usuario hace clic en 'Descargar Reporte'"
      - "Se muestra una notificaciÃ³n/toast: 'Reporte generado correctamente'"
      - "Alternativa: El usuario hace clic en 'Compartir'"
      - "Se muestra un toast: 'Enlace copiado al portapapeles'"
    alternatives: []
    errors: []

  - id: "FLOW-021"
    name: "Proteger ruta BI por extensiÃ³n activa"
    type: "system_flow"
    module: "bi"
    actor: "system"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-006"
    story_points: 1
    entities: ["extension"]
    trigger: "Un usuario intenta navegar a /modules/bi"
    preconditions: ["La extensiÃ³n BI NO estÃ¡ activa"]
    steps:
      - "El sistema verifica activeExtensions en el store"
      - "BI no estÃ¡ en la lista de activas"
      - "Redirige a /marketplace"
    alternatives: []
    errors: []

  # â”€â”€â”€ GESTIÃ“N DE USUARIOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-022"
    name: "Listar y buscar usuarios"
    type: "user_flow"
    module: "user_management"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-007"
    story_points: 3
    entities: ["user", "role", "group"]
    trigger: "El admin navega a /admin/users"
    preconditions: ["El usuario tiene rol Admin"]
    steps:
      - "El sistema verifica que el rol es Admin"
      - "Se carga la tabla de usuarios con: avatar, nombre, email, roles (chips), grupos, estado"
      - "Se muestran estadÃ­sticas: total, activos, inactivos"
      - "El admin escribe en el campo de bÃºsqueda"
      - "La tabla se filtra en tiempo real por nombre o email"
    alternatives: []
    errors: []

  - id: "FLOW-023"
    name: "Editar usuario y asignar roles"
    type: "user_flow"
    module: "user_management"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-007"
    story_points: 5
    entities: ["user", "role"]
    trigger: "El admin hace clic en un usuario de la lista"
    preconditions: ["El admin estÃ¡ en /admin/users"]
    steps:
      - "El admin hace clic en una fila de usuario"
      - "Se abre un panel lateral o modal con detalle del usuario"
      - "Se muestran campos editables: nombre, email"
      - "Los roles se muestran como chips seleccionables (multi-select)"
      - "El admin aÃ±ade/quita roles haciendo clic en los chips"
      - "Al guardar, el store local se actualiza"
    alternatives: []
    errors: []

  - id: "FLOW-024"
    name: "Crear nuevo usuario"
    type: "user_flow"
    module: "user_management"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-007"
    story_points: 3
    entities: ["user"]
    trigger: "El admin hace clic en 'Crear Usuario'"
    preconditions: ["Rol es Admin"]
    steps:
      - "El admin hace clic en 'Crear Usuario'"
      - "Se abre formulario con: nombre, email, rol, grupo"
      - "El admin completa y guarda"
      - "El usuario se agrega a la lista local y aparece en la tabla"
    alternatives: []
    errors:
      - "Si email estÃ¡ vacÃ­o o duplicado, se muestra error"

  - id: "FLOW-025"
    name: "Cambiar estado de usuario"
    type: "user_flow"
    module: "user_management"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-007"
    story_points: 2
    entities: ["user"]
    trigger: "El admin cambia el toggle de estado de un usuario"
    preconditions: ["El admin estÃ¡ en la lista de usuarios"]
    steps:
      - "El admin localiza al usuario en la tabla"
      - "Hace clic en el toggle/botÃ³n de estado"
      - "El estado cambia de activo a inactivo (o viceversa)"
      - "El badge de estado se actualiza visualmente"
    alternatives: []
    errors: []

  # â”€â”€â”€ ROLES Y PERMISOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-026"
    name: "Listar roles existentes"
    type: "user_flow"
    module: "roles_permissions"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-008"
    story_points: 3
    entities: ["role", "permission"]
    trigger: "El admin navega a /admin/roles"
    preconditions: ["Rol es Admin"]
    steps:
      - "El sistema renderiza tabla de roles: Admin, Gestor, Viewer"
      - "Cada fila muestra nombre del rol y badge con cantidad de usuarios asignados"
      - "Los roles del sistema no pueden eliminarse (botÃ³n deshabilitado)"
    alternatives: []
    errors: []

  - id: "FLOW-027"
    name: "Ver y editar matriz de permisos de un rol"
    type: "user_flow"
    module: "roles_permissions"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-008"
    story_points: 5
    entities: ["role", "permission"]
    trigger: "El admin hace clic en un rol de la lista"
    preconditions: ["El admin estÃ¡ en /admin/roles"]
    steps:
      - "El admin hace clic en el nombre de un rol"
      - "Se abre una vista con la matriz de permisos"
      - "La matriz muestra filas de permisos (view_kpi, edit_kpi, etc.) con checkboxes"
      - "Admin tiene todos marcados, Viewer solo los de lectura"
      - "El admin puede activar/desactivar checkboxes"
      - "Al guardar, los permisos se actualizan en el store local"
    alternatives: []
    errors: []

  - id: "FLOW-028"
    name: "Crear nuevo rol personalizado"
    type: "user_flow"
    module: "roles_permissions"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-008"
    story_points: 3
    entities: ["role", "permission"]
    trigger: "El admin hace clic en 'Crear Rol'"
    preconditions: ["Rol es Admin"]
    steps:
      - "El admin hace clic en 'Crear Rol'"
      - "Se abre formulario con campo nombre y matriz de permisos vacÃ­a"
      - "El admin ingresa nombre y selecciona permisos"
      - "Al guardar, el rol se agrega a la lista local"
    alternatives: []
    errors:
      - "Si el nombre estÃ¡ vacÃ­o o es duplicado, se muestra error"

  # â”€â”€â”€ GRUPOS DE USUARIOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-029"
    name: "Listar grupos organizacionales"
    type: "user_flow"
    module: "user_groups"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-009"
    story_points: 3
    entities: ["group"]
    trigger: "El admin navega a /admin/groups"
    preconditions: ["Rol es Admin"]
    steps:
      - "El sistema renderiza lista de grupos mock"
      - "Cada grupo muestra: avatar con inicial, nombre, descripciÃ³n, cantidad de miembros"
      - "Grupos archivados se muestran con opacidad reducida"
    alternatives: []
    errors: []

  - id: "FLOW-030"
    name: "Crear grupo nuevo"
    type: "user_flow"
    module: "user_groups"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-009"
    story_points: 3
    entities: ["group"]
    trigger: "El admin hace clic en 'Crear Grupo'"
    preconditions: ["Rol es Admin"]
    steps:
      - "El admin hace clic en 'Crear Grupo'"
      - "Se abre formulario con: nombre, descripciÃ³n, rol por defecto"
      - "El admin completa y guarda"
      - "El grupo aparece en la lista con 0 miembros"
    alternatives: []
    errors: []

  - id: "FLOW-031"
    name: "Gestionar miembros de un grupo"
    type: "user_flow"
    module: "user_groups"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-009"
    story_points: 3
    entities: ["group", "user"]
    trigger: "El admin hace clic en un grupo"
    preconditions: ["El admin estÃ¡ en /admin/groups"]
    steps:
      - "Se abre vista de detalle con lista de miembros actuales"
      - "El admin puede agregar usuarios via autocompletar"
      - "Al agregar un usuario al grupo, hereda el rol por defecto"
      - "El admin puede remover usuarios del grupo"
    alternatives: []
    errors: []

  # â”€â”€â”€ DASHBOARD PRINCIPAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-032"
    name: "Visualizar dashboard con mÃ©tricas"
    type: "user_flow"
    module: "dashboard"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-010"
    story_points: 5
    entities: ["user", "extension", "kpi_indicator"]
    trigger: "El usuario navega a /dashboard"
    preconditions: ["El usuario estÃ¡ autenticado"]
    steps:
      - "El sistema renderiza saludo personalizado con nombre y rol"
      - "Se muestran cards de resumen: usuarios activos, extensiones habilitadas"
      - "Cada card tiene Ã­cono, label, valor y % de cambio"
      - "Existen accesos rÃ¡pidos (quick links) a mÃ³dulos activos"
    alternatives: []
    errors: []

  - id: "FLOW-033"
    name: "Mostrar widgets de extensiones activas en dashboard"
    type: "system_flow"
    module: "dashboard"
    actor: "system"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-010"
    story_points: 3
    entities: ["extension", "kpi_indicator"]
    trigger: "El dashboard detecta extensiones activas en el store"
    preconditions: ["Al menos una extensiÃ³n estÃ¡ activa"]
    steps:
      - "El dashboard consulta activeExtensions del store"
      - "Si KPI estÃ¡ activa, muestra widgets con los 3 KPIs principales"
      - "Si BI estÃ¡ activa, muestra una mini grÃ¡fica resumen"
      - "Si Surveys estÃ¡ activa, muestra contador de encuestas pendientes"
      - "Si ninguna extensiÃ³n estÃ¡ activa, muestra solo cards base"
    alternatives: []
    errors: []

  - id: "FLOW-034"
    name: "Mostrar grÃ¡fica de actividad reciente"
    type: "user_flow"
    module: "dashboard"
    actor: "admin"
    priority: "low"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-010"
    story_points: 2
    entities: []
    trigger: "El dashboard se renderiza"
    preconditions: ["El usuario estÃ¡ en /dashboard"]
    steps:
      - "El dashboard renderiza una card con mini grÃ¡fica de lÃ­nea"
      - "La grÃ¡fica muestra actividad de los Ãºltimos 7 dÃ­as (datos mock)"
      - "El tooltip muestra el valor al hover"
    alternatives: []
    errors: []

  # â”€â”€â”€ ESTADO GLOBAL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-035"
    name: "Inicializar store con datos mock"
    type: "system_flow"
    module: "global_state"
    actor: "system"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-011"
    story_points: 3
    entities: ["user", "role", "extension", "organization"]
    trigger: "La aplicaciÃ³n se monta por primera vez"
    preconditions: ["Ninguna"]
    steps:
      - "Zustand crea el store con estado inicial"
      - "currentUser se establece con el primer usuario mock"
      - "currentRole se establece como 'admin'"
      - "activeExtensions se inicializa vacÃ­o"
      - "organization se carga desde datos mock"
    alternatives: []
    errors: []

  - id: "FLOW-036"
    name: "Cambiar rol en tiempo real"
    type: "user_flow"
    module: "global_state"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-011"
    story_points: 3
    entities: ["role"]
    trigger: "El usuario selecciona un rol diferente en el header"
    preconditions: ["El header estÃ¡ renderizado"]
    steps:
      - "El usuario abre el selector de rol en el header"
      - "Selecciona un nuevo rol (ej. Viewer)"
      - "El store ejecuta setRole('viewer')"
      - "El sidebar se recalcula: Ã­tems de admin desaparecen"
      - "Si el usuario estaba en una ruta admin, se redirige a /dashboard"
    alternatives: []
    errors: []

  - id: "FLOW-037"
    name: "Toggle de extensiÃ³n con efectos en cascada"
    type: "system_flow"
    module: "global_state"
    actor: "system"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-011"
    story_points: 5
    entities: ["extension"]
    trigger: "Se llama a toggleExtension() desde el marketplace"
    preconditions: ["El marketplace estÃ¡ abierto"]
    steps:
      - "toggleExtension recibe extensionId"
      - "Si la extensiÃ³n estaba inactiva, se agrega a activeExtensions"
      - "Si estaba activa, se remueve de activeExtensions"
      - "El sidebar se re-renderiza con los nuevos Ã­tems"
      - "Si se desactivÃ³ y el usuario estaba en esa ruta, redirige a /dashboard"
    alternatives: []
    errors: []

  - id: "FLOW-038"
    name: "Reset de estado al cambiar organizaciÃ³n"
    type: "system_flow"
    module: "global_state"
    actor: "system"
    priority: "low"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-011"
    story_points: 2
    entities: ["organization", "extension"]
    trigger: "Se cambia de organizaciÃ³n (extensiÃ³n futura)"
    preconditions: ["MÃºltiples organizaciones disponibles"]
    steps:
      - "El store recibe setOrganization(newOrg)"
      - "Se resetean activeExtensions a vacÃ­o"
      - "Se recarga la lista de usuarios de la nueva organizaciÃ³n"
      - "Se redirige a /dashboard"
    alternatives: []
    errors: []

  # â”€â”€â”€ DATOS MOCK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  - id: "FLOW-039"
    name: "Proveer datos mock realistas"
    type: "data_flow"
    module: "global_state"
    actor: "system"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-012"
    story_points: 3
    entities: ["user", "extension", "kpi_indicator", "survey", "group"]
    trigger: "El sistema necesita datos para cualquier mÃ³dulo"
    preconditions: ["Ninguna"]
    steps:
      - "El archivo mock/data.ts exporta arrays tipados de todas las entidades"
      - "Usuarios: 5+ con nombres, emails, roles y grupos variados"
      - "Extensiones: KPI, Encuestas, BI con metadatos completos"
      - "KPIs: 4+ con valores y metas realistas para semÃ¡foro"
      - "Encuestas: 3+ con estados diferentes"
      - "Grupos: 3+ con miembros asignados"
    alternatives: []
    errors: []

  - id: "FLOW-040"
    name: "Proveer roles y permisos mock"
    type: "data_flow"
    module: "global_state"
    actor: "system"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-012"
    story_points: 2
    entities: ["role", "permission"]
    trigger: "El sistema necesita datos de roles y permisos"
    preconditions: ["Ninguna"]
    steps:
      - "El archivo mock exporta 3 roles: Admin (todos los permisos), Gestor (parcial), Viewer (solo lectura)"
      - "Cada rol tiene un array de permission strings"
      - "Los permisos incluyen: view_kpi, edit_kpi, view_surveys, edit_surveys, view_bi, activate_extensions, manage_users, manage_roles"
      - "Relaciones entre usuarios y roles son coherentes"
    alternatives: []
    errors: []

  # â”€â”€â”€ FLUJOS PREPARATORIOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - id: "FLOW-P01"
    name: "Configurar proyecto y dependencias"
    type: "system_flow"
    module: "global_state"
    actor: "system"
    priority: "critical"
    status: "implemented"
    test_status: "none"
    sprint_status: "done"
    story: "US-P01"
    story_points: 5
    entities: []
    trigger: "Inicio del proyecto"
    preconditions: ["Node.js >= 18 instalado"]
    steps:
      - "Inicializar Next.js 15 con App Router directamente en orq/ (raÃ­z), NO crear subcarpeta: npx create-next-app@latest ./ --ts --tailwind --app --eslint"
      - "Configurar TypeScript strict + path aliases (@/) en tsconfig.json"
      - "Instalar dependencias: react-hook-form, @hookform/resolvers, zod, json-server, lucide-react, clsx"
      - "Crear db.json con datos mock iniciales en raÃ­z para JSON Server"
      - "Agregar script en package.json: 'mock-api': 'json-server --watch db.json --port 3001'"
      - "Definir estructura de carpetas: app/ (rutas), components/ (UI reutilizable), lib/ (utils, servicios), types/ (interfaces TS)"
      - "Configurar tokens del design system en tailwind.config.ts (colores, fuentes, border-radius)"
      - "Documentar decisiones en STACK.md"
    alternatives: []
    errors: []

  - id: "FLOW-P02"
    name: "Configurar routing y store base"
    type: "system_flow"
    module: "global_state"
    actor: "system"
    priority: "critical"
    status: "implemented"
    test_status: "none"
    sprint_status: "done"
    story: "US-P01"
    story_points: 3
    entities: []
    trigger: "Proyecto base creado"
    preconditions: ["FLOW-P01 completado"]
    steps:
      - "Crear layout.tsx raÃ­z con <html>, <body> y fuente Inter de Google Fonts"
      - "Crear rutas con App Router: app/(landing)/page.tsx, app/(app)/dashboard/page.tsx, app/(app)/organizacion/page.tsx, app/(app)/usuarios/page.tsx, app/(app)/extensiones/page.tsx, app/contacto/page.tsx"
      - "Crear un React Context (AppContext) con estado: currentUser, currentRole, activeExtensions"
      - "Crear hook useAppContext() para acceso global al estado"
      - "Verificar que npm run dev arranca sin errores y JSON Server corre en paralelo"
    alternatives: []
    errors: []

  - id: "FLOW-P03"
    name: "Implementar tokens del design system"
    type: "system_flow"
    module: "app_shell"
    actor: "system"
    priority: "critical"
    status: "implemented"
    test_status: "none"
    sprint_status: "done"
    story: "US-P02"
    story_points: 3
    entities: []
    trigger: "FLOW-P01 completado"
    preconditions: ["Proyecto base configurado"]
    steps:
      - "Definir CSS custom properties: --primary, --primary-light, --accent-green, --accent-red, --surface, --bg, --text-primary, --text-secondary, --border"
      - "Importar fuente Inter desde Google Fonts"
      - "Definir sistema de espaciado (4px base, 8/16/24/32px escalas)"
      - "Definir border-radius: 12px cards, 999px pills/badges"
      - "Definir iconografÃ­a: Lucide React, outlined, 20px sidebar"
    alternatives: []
    errors: []

  - id: "FLOW-P04"
    name: "Crear componentes base reutilizables"
    type: "system_flow"
    module: "app_shell"
    actor: "system"
    priority: "critical"
    status: "implemented"
    test_status: "none"
    sprint_status: "done"
    story: "US-P02"
    story_points: 5
    entities: []
    trigger: "FLOW-P03 completado"
    preconditions: ["Tokens del design system definidos"]
    steps:
      - "Crear componente Button con variantes: primary (azul), outline, dark (#0F172A), disabled"
      - "Crear componente Badge (pill) con variantes de color"
      - "Crear componente Card con border-radius 12px y shadow sutil"
      - "Crear componente Input con icono opcional (ej: lupa de bÃºsqueda)"
      - "Crear patrÃ³n KPI Card: icono + label + valor + % cambio + color semÃ¡foro"
      - "Crear patrÃ³n Extension Card: icono + nombre + descripciÃ³n + badge estado + botÃ³n activar"
      - "Crear pÃ¡gina de showcase con todos los componentes renderizados"
    alternatives: []
    errors: []

  - id: "FLOW-P05"
    name: "Crear datos mock de entidades"
    type: "data_flow"
    module: "global_state"
    actor: "system"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-P03"
    story_points: 5
    entities: ["user", "extension", "area"]
    trigger: "FLOW-P01 y FLOW-P03 completados"
    preconditions: ["Estructura del proyecto definida"]
    steps:
      - "Crear mock/data.ts con tipos TypeScript para User, Area, Extension, KPI, Role"
      - "Generar 10+ usuarios mock con nombres espaÃ±oles, emails @orquestra.com"
      - "Generar 14+ Ã¡reas mock con jerarquÃ­a de 3 niveles (DirecciÃ³n General como raÃ­z)"
      - "Generar 5 extensiones: KPI (activa), Formularios (disponible), Encuestas (disponible), ColaboraciÃ³n (prÃ³ximamente), BI (prÃ³ximamente)"
      - "Generar KPIs mock: Total Ã¡reas (12), Colaboradores (148), Actividad reciente (24 hoy, +18%)"
      - "Asegurar IDs Ãºnicos y relaciones coherentes entre entidades"
    alternatives: []
    errors: []

  - id: "FLOW-P06"
    name: "Configurar store con mock data y roles"
    type: "data_flow"
    module: "global_state"
    actor: "system"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-P03"
    story_points: 3
    entities: ["role", "permission"]
    trigger: "FLOW-P05 completado"
    preconditions: ["Datos mock creados"]
    steps:
      - "Crear 3 roles mock: Directivo (todos), Responsable de Ã¡rea (parcial), Colaborador (lectura)"
      - "Importar datos mock en el React Context como estado inicial"
      - "Proveer acciones: setRole(), toggleExtension(), getAreasByParent()"
      - "Exportar datos tipados desde mock/data.ts"
    alternatives: []
    errors: []

  # â”€â”€â”€ ORGANIZACIÃ“N â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - id: "FLOW-041"
    name: "Visualizar estructura organizacional"
    type: "user_flow"
    module: "organization_mgmt"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-013"
    story_points: 5
    entities: ["area"]
    trigger: "El usuario navega a /organizacion"
    preconditions: ["Usuario autenticado con rol Directivo o Responsable"]
    steps:
      - "El usuario hace clic en 'OrganizaciÃ³n' en el sidebar"
      - "El sistema renderiza H1 'OrganizaciÃ³n' + subtÃ­tulo"
      - "Se muestran 3 KPI cards: Total Ã¡reas (12), Colaboradores (148), Actividad reciente (24 hoy, +18%)"
      - "Se renderiza un tree list con Ã¡reas jerÃ¡rquicas, 'DirecciÃ³n General' como raÃ­z"
      - "Cada nodo muestra: nombre del Ã¡rea, responsable, NÂ° empleados, chevron â€º"
    alternatives:
      - "Si no hay Ã¡reas, se muestra empty state con CTA 'Crear primera Ã¡rea'"
    errors: []

  - id: "FLOW-042"
    name: "Expandir y navegar jerarquÃ­a de Ã¡reas"
    type: "user_flow"
    module: "organization_mgmt"
    actor: "admin"
    priority: "high"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-013"
    story_points: 3
    entities: ["area"]
    trigger: "El usuario hace clic en el chevron de un Ã¡rea"
    preconditions: ["FLOW-041 renderizado"]
    steps:
      - "El usuario hace clic en el chevron de un Ã¡rea"
      - "El nodo se expande mostrando sub-Ã¡reas con indentaciÃ³n progresiva"
      - "El chevron rota 90Â° indicando estado expandido"
      - "Los sub-nodos muestran la misma estructura (Ã¡rea, responsable, empleados)"
    alternatives:
      - "Si el Ã¡rea no tiene sub-Ã¡reas, el chevron no aparece"
    errors: []

  - id: "FLOW-043"
    name: "Crear nueva Ã¡rea"
    type: "user_flow"
    module: "organization_mgmt"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-013"
    story_points: 3
    entities: ["area"]
    trigger: "El usuario hace clic en 'Nueva Ãrea'"
    preconditions: ["Usuario con rol Directivo"]
    steps:
      - "El usuario hace clic en 'Nueva Ãrea'"
      - "Se abre modal/formulario con campos: nombre, responsable (select), Ã¡rea padre (select)"
      - "El usuario llena los campos y hace clic en 'Guardar'"
      - "El sistema agrega el Ã¡rea al Ã¡rbol y actualiza los KPIs"
    alternatives:
      - "Si el usuario cancela, el formulario se cierra sin cambios"
    errors:
      - "Si el nombre estÃ¡ vacÃ­o, se muestra error de validaciÃ³n"

  - id: "FLOW-044"
    name: "Ver detalle de Ã¡rea"
    type: "user_flow"
    module: "organization_mgmt"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-013"
    story_points: 2
    entities: ["area", "user"]
    trigger: "El usuario hace clic en el nombre de un Ã¡rea"
    preconditions: ["FLOW-041 renderizado"]
    steps:
      - "El usuario hace clic en el nombre de un Ã¡rea"
      - "Se abre panel lateral o vista de detalle"
      - "Se muestra: nombre, responsable, lista de empleados asignados"
      - "Si el usuario tiene permisos, aparecen botones de ediciÃ³n"
    alternatives: []
    errors: []

  # â”€â”€â”€ CONTACTO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - id: "FLOW-045"
    name: "Enviar formulario de contacto"
    type: "user_flow"
    module: "contact"
    actor: "visitante"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-014"
    story_points: 3
    entities: ["contact_lead"]
    trigger: "El usuario navega a /contacto"
    preconditions: ["Ninguna"]
    steps:
      - "El usuario accede a /contacto"
      - "Se renderiza layout 2 columnas: formulario (izq) + info contacto (der)"
      - "El usuario llena: Nombre completo, Correo electrÃ³nico, Empresa, Mensaje"
      - "El usuario hace clic en 'Enviar mensaje'"
      - "El sistema valida campos (email vÃ¡lido, campos no vacÃ­os)"
      - "Se muestra feedback de Ã©xito (toast o mensaje en pantalla)"
    alternatives:
      - "Si hay errores de validaciÃ³n, se resaltan los campos con error"
    errors:
      - "Si el email no es vÃ¡lido, se muestra mensaje de error inline"

  - id: "FLOW-046"
    name: "Visualizar info de contacto y CTA de demo"
    type: "user_flow"
    module: "contact"
    actor: "visitante"
    priority: "low"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-014"
    story_points: 2
    entities: []
    trigger: "El usuario navega a /contacto"
    preconditions: ["Ninguna"]
    steps:
      - "La columna derecha muestra horario: 'Lunes a Viernes, 9:00 - 18:00'"
      - "Se muestra email de contacto: info@orquestra.com"
      - "Se muestra telÃ©fono: +34 900 123 456"
      - "Se muestra CTA: 'Â¿Prefieres una demo personalizada?' con enlace"
    alternatives: []
    errors: []

  # â”€â”€â”€ FORMULARIOS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  - id: "FLOW-047"
    name: "Activar extensiÃ³n Formularios"
    type: "user_flow"
    module: "forms"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-015"
    story_points: 3
    entities: ["extension"]
    trigger: "El admin activa 'Formularios' desde el marketplace"
    preconditions: ["Marketplace renderizado, extensiÃ³n disponible"]
    steps:
      - "El admin navega a /extensiones"
      - "Localiza la card 'Formularios' con badge 'Disponible'"
      - "Hace clic en 'Activar'"
      - "El sistema agrega 'Formularios' como sub-Ã­tem en sidebar bajo 'Contenidos'"
      - "La card cambia a badge 'Activa' con botÃ³n 'Desactivar'"
    alternatives:
      - "Si desactiva, 'Formularios' desaparece del sidebar y redirige a /dashboard"
    errors: []

  - id: "FLOW-048"
    name: "Gestionar formularios creados"
    type: "user_flow"
    module: "forms"
    actor: "admin"
    priority: "medium"
    status: "pending"
    test_status: "none"
    sprint_status: "todo"
    story: "US-015"
    story_points: 3
    entities: []
    trigger: "El usuario navega a /formularios"
    preconditions: ["ExtensiÃ³n Formularios activada"]
    steps:
      - "El usuario hace clic en 'Formularios' en el sidebar"
      - "Se renderiza lista de formularios mock con nombre, estado y fecha"
      - "Existe botÃ³n 'Nuevo formulario' para crear uno nuevo"
      - "Los datos mock incluyen: 'Encuesta de clima laboral' (activo) y 'Solicitud de vacaciones' (borrador)"
    alternatives:
      - "Si no hay formularios, se muestra empty state"
    errors: []
