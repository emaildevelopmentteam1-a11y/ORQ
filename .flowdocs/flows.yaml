meta:
  app: "Orquestra"
  version: "1.0.0"
  description: "Plataforma web enfocada exclusivamente en la Landing Page corporativa, flujos de captación de leads (Contacto/Demo) y navegación enterprise."
  updated_at: "2026-02-22"
  sprint:
    number: 1
    goal: "Lanzamiento de Landing Page y Funnels de Conversión"
    start: "2026-02-22"
    end: "2026-03-07"
    days_left: 13
  stats:
    total: 5
    implemented: 5
    partial: 0
    pending: 0
    with_tests: 0
    coverage_pct: 0

modules:
  - id: "landing"
    name: "Landing Page"
    description: "Página de aterrizaje pública y escaparate del producto. Incluye hero, beneficios, capacidades clave, y modelo de arquitectura modular para transmitir madurez enterprise."
    actors: ["visitante", "evaluador_tecnico", "director"]

  - id: "contact_flow"
    name: "Flujo de Contacto"
    description: "Módulo de captación de leads generales y consultas corporativas. Emplea un formulario validado con envío de notificaciones y experiencia de éxito."
    actors: ["visitante"]

  - id: "demo_flow"
    name: "Flujo de Demo Guiada"
    description: "Módulo especializado en captación de leads de alta intención (Decision Makers). Exige campos de calificación y promete agendamiento de sesión técnica."
    actors: ["tomador_decision", "cto"]

  - id: "navigation"
    name: "Navegación Global"
    description: "Sistema de enrutamiento y anclaje (Navbar, Footer, enlaces cruzados) que garantiza la cohesión entre la landing, rutas dinámicas y secciones de contenido."
    actors: ["visitante", "todos"]

  - id: "lead-capture"
    name: "Captura de Leads y Notificaciones"
    description: "Manejo de envíos de formulario, integración con servicio de correo (Resend) y notificaciones comerciales."
    actors: ["visitante", "director", "tomador_decision"]

entities:
  - id: "visitor"
    name: "Visitante Público"
    states: ["exploring", "bounced"]
    transitions: []

  - id: "lead"
    name: "Lead Corporativo"
    states: ["captured", "contacted", "qualified"]
    transitions:
      - from: "captured"
        to: "contacted"
        action: "Asesor contacta al lead vía email/teléfono"

stories:
  # ═══════════════════════════════════════════
  # HISTORIAS DE USUARIO - LANDING & CONVERSIÓN
  # ═══════════════════════════════════════════
  
  - id: "US-001"
    title: "Landing enterprise orientada a decisión ejecutiva"
    module: "landing"
    priority: "high"
    status: "implemented"
    sprint: 1
    story_points: 8
    actors: ["visitante", "director", "tomador_decision"]

    narrative: >
      Como director o responsable de transformación digital,
      quiero ingresar a la landing de Orquestra y comprender en segundos
      que se trata de una plataforma empresarial modular, confiable y escalable,
      para evaluar rápidamente su adopción y acceder a una demostración.

    business_context:
      product_positioning: "Plataforma enterprise modular tipo ecosystem-driven (similar a Salesforce AppExchange mindset)"
      key_message: "Activa solo las capacidades que tu organización necesita"
      differentiation:
        - "Arquitectura por extensiones activables"
        - "Marketplace integrado"
        - "Enfoque enterprise-first"
        - "Time-to-value acelerado"

    ux_intent:
      primary_goal: "Conversión a demo"
      secondary_goal: "Confianza ejecutiva"
      tertiary_goal: "Comprensión del modelo modular"
      emotional_tone:
        - "corporativo"
        - "confiable"
        - "moderno"
        - "tecnológicamente sólido"

    information_architecture:
      required_sections:
        - "Hero estratégico"
        - "Propuesta de valor empresarial"
        - "Modelo de plataforma modular"
        - "Capacidades clave"
        - "Extensiones destacadas"
        - "Beneficios enterprise/cloud"
        - "CTA de conversión"
        - "Footer institucional"

    acceptance_criteria:

      - id: "AC-001"
        name: "Hero con posicionamiento ejecutivo"
        description: >
          La sección hero comunica inmediatamente que Orquestra es
          una plataforma empresarial modular. Debe incluir:
          - H1 orientado a transformación operativa medible
          - Subtítulo que mencione explícitamente el modelo por extensiones
          - Mockup limpio tipo dashboard enterprise
          - CTA primario hacia demo
          - CTA secundario informativo
        validations:
          - "El valor modular se entiende en ≤5 segundos"
          - "Existe exactamente un H1"
          - "El hero es above-the-fold en desktop"
          - "El diseño transmite estética enterprise (no startup genérica)"
        validated: true
        flow_ids: ["FLOW-001"]

      - id: "AC-002"
        name: "Sección de propuesta de valor"
        description: >
          Existe una sección que explica claramente que Orquestra permite
          construir soluciones empresariales mediante la activación de
          extensiones bajo demanda.
        validations:
          - "Se menciona explícitamente el concepto de extensiones"
          - "Se comunica el beneficio de usar solo lo necesario"
          - "El lenguaje es corporativo, no técnico excesivo"
          - "La jerarquía visual guía la lectura ejecutiva"
        validated: true
        flow_ids: ["FLOW-002"]

      - id: "AC-003"
        name: "Modelo de plataforma modular"
        description: >
          Existe una sección visual que explique el flujo:
          Organización → Activación de extensiones → Solución operativa.
        validations:
          - "El flujo se entiende sin leer texto largo"
          - "Existe apoyo visual (diagrama, steps o visual flow)"
          - "Refuerza el concepto de escalabilidad"
        validated: true
        flow_ids: ["FLOW-002"]

      - id: "AC-004"
        name: "Capacidades empresariales"
        description: >
          Existe una sección de capacidades clave con cards
          (ej. multi-organización, KPI, automatización, gobierno de datos).
        validations:
          - "Las capacidades están orientadas a empresa, no a usuario individual"
          - "Iconografía consistente"
          - "Grid responsive"
          - "Hover states en desktop"
        validated: true
        flow_ids: ["FLOW-002"]

      - id: "AC-005"
        name: "Extensiones destacadas como marketplace"
        description: >
          La landing muestra extensiones (KPI, Encuestas, BI) claramente
          etiquetadas como 'Extensión' o 'Módulo activable', reforzando
          el modelo tipo marketplace.
        validations:
          - "Cada item tiene badge de extensión"
          - "Se entiende que pueden activarse bajo demanda"
          - "La sección transmite mentalidad de ecosystem"
        validated: true
        flow_ids: ["FLOW-002"]

      - id: "AC-006"
        name: "Beneficios enterprise y cloud"
        description: >
          Existe una sección que comunique atributos enterprise:
          seguridad, escalabilidad, multi-tenant, alta disponibilidad.
        validations:
          - "Lenguaje orientado a TI/directores"
          - "Diseño visual diferenciado (sección premium)"
          - "No usa claims vacíos sin contexto"
        validated: true
        flow_ids: ["FLOW-002"]

      - id: "AC-007"
        name: "Navegación corporativa"
        description: >
          La navbar sticky muestra logo Orquestra y navegación clara
          orientada a exploración ejecutiva.
        validations:
          - "Sticky funcional"
          - "Responsive con menú móvil"
          - "Estados hover y focus"
          - "Accesible por teclado"
        validated: true
        flow_ids: ["FLOW-003"]

      - id: "AC-008"
        name: "Experiencia responsive premium"
        description: >
          La landing mantiene calidad visual y legibilidad
          en móvil, tablet y desktop.
        validations:
          - "Sin scroll horizontal en 320px"
          - "CTAs táctiles ≥44px"
          - "Tipografía escala correctamente"
          - "Las secciones mantienen jerarquía visual"
        validated: true
        flow_ids: ["FLOW-001"]

      - id: "AC-009"
        name: "CTA final orientado a decisión"
        description: >
          La página cierra con un bloque de conversión que invite
          a solicitar demo o información, reforzando confianza enterprise.
        validations:
          - "Ubicado antes del footer"
          - "Mensaje orientado a valor de negocio"
          - "Botón primario consistente con design system"
        validated: true
        flow_ids: ["FLOW-002"]

    non_functional_requirements:
      performance:
        - "Lighthouse ≥ 90"
        - "LCP < 2.5s"
        - "CLS < 0.1"
      accessibility:
        - "WCAG 2.1 AA básico"
        - "Navegación por teclado"
      seo:
        - "Metadata completa"
        - "OpenGraph"
        - "Estructura semántica correcta"

    definition_of_done:
      - "La propuesta modular se entiende claramente"
      - "La página transmite confianza enterprise"
      - "Todos los AC validados"
      - "Build de producción exitoso"
      - "Revisión UX aprobada"
  
  # ═══════════════════════════════════════════
  # US-002: Página de contacto corporativa con confirmación de envío
  # ═══════════════════════════════════════════
  - id: "US-002"
    title: "Página de contacto corporativa con confirmación de envío"
    module: "landing"
    priority: "high"
    status: "implemented"
    sprint: 1
    story_points: 8
    actors: ["visitante", "cto", "director", "tomador_decision"]

    narrative: >
      Como Director de Tecnología o responsable de evaluar plataformas,
      quiero acceder a una página de contacto clara, moderna y confiable
      para solicitar información sobre precios, planes y capacidades de Orquestra,
      y recibir confirmación inmediata de que mi mensaje fue enviado correctamente.

    business_goal:
      - "Capturar leads calificados enterprise"
      - "Reducir fricción en el primer contacto"
      - "Transmitir confianza corporativa"
      - "Preparar pipeline comercial"

    ux_intent:
      primary_goal: "Envío exitoso del formulario"
      secondary_goal: "Generar confianza post-envío"
      emotional_tone:
        - "profesional"
        - "moderno"
        - "enterprise"
        - "confiable"
        - "sin fricción"

    functional_scope:

      form_fields_required:
        - "Nombre completo"
        - "Correo corporativo"
        - "Organización"
        - "Rol"
        - "Mensaje"
      optional_fields:
        - "Teléfono"
        - "Tamaño de la organización"
        - "Interés principal (planes, demo, partnership, etc.)"

      system_behaviors:
        - "Validación en tiempo real"
        - "Estado de carga al enviar"
        - "Mensaje de éxito visible"
        - "Envío de correo al equipo comercial"
        - "Correo de confirmación al usuario"
        - "Prevención de spam básica"

    acceptance_criteria:

      - id: "AC-001"
        name: "Diseño corporativo de la página"
        description: >
          La página de contacto presenta un layout moderno,
          limpio y alineado al design system enterprise de Orquestra.
        validations:
          - "Jerarquía visual clara"
          - "Espaciado consistente"
          - "Tipografía enterprise"
          - "Responsive completo"
        validated: true

      - id: "AC-002"
        name: "Formulario intuitivo"
        description: >
          El formulario es fácil de completar para un ejecutivo,
          con labels claros, placeholders útiles y agrupación lógica.
        validations:
          - "Tiempo estimado de llenado ≤ 60 segundos"
          - "Campos obligatorios marcados"
          - "Errores visibles inline"
          - "Navegación por teclado funcional"
        validated: true

      - id: "AC-003"
        name: "Sugerencias inteligentes de mensaje"
        description: >
          La UI muestra ejemplos o chips de ayuda sobre
          qué puede solicitar el usuario (ej. precios, demo, arquitectura).
        validations:
          - "Existen al menos 4 sugerencias visibles"
          - "Al hacer click se insertan en el textarea"
          - "No interfieren con escritura manual"
        validated: true

      - id: "AC-004"
        name: "Envío funcional del formulario"
        description: >
          Al enviar, el sistema procesa la solicitud de forma asíncrona
          y muestra estado de carga.
        validations:
          - "Botón muestra loading state"
          - "Se evita doble envío"
          - "Timeout manejado correctamente"
          - "Errores de red manejados"
        validated: true

      - id: "AC-005"
        name: "Confirmación visual inmediata"
        description: >
          Tras envío exitoso, el usuario ve un mensaje claro de confirmación
          sin abandonar la página.
        validations:
          - "Mensaje de éxito visible"
          - "Tono corporativo y tranquilizador"
          - "Incluye expectativa de tiempo de respuesta"
          - "Accesible por lectores de pantalla"
        validated: true

      - id: "AC-006"
        name: "Correo recibido por el equipo"
        description: >
          El sistema envía un email estructurado al equipo comercial
          con la información del lead.
        validations:
          - "Incluye todos los campos"
          - "Formato legible"
          - "Timestamp incluido"
          - "Ambiente configurable (dev/prod)"
        validated: true

      - id: "AC-007"
        name: "Correo de confirmación al usuario"
        description: >
          El usuario recibe un correo automático confirmando
          la recepción de su solicitud.
        validations:
          - "Enviado al correo capturado"
          - "Incluye resumen del mensaje"
          - "Branding de Orquestra"
          - "Tiempo estimado de respuesta"
        validated: true

      - id: "AC-008"
        name: "Experiencia responsive premium"
        description: >
          La página mantiene usabilidad y estética en móvil,
          tablet y desktop.
        validations:
          - "Sin scroll horizontal en 320px"
          - "Campos táctiles ≥44px"
          - "CTA visible en viewport móvil"
        validated: true

      - id: "AC-009"
        name: "Protección básica anti-spam"
        description: >
          El formulario implementa al menos una medida anti-spam.
        validations:
          - "Honeypot o equivalente"
          - "Rate limiting básico"
          - "Validación de dominio de correo"
        validated: true

    non_functional_requirements:
      performance:
        - "Tiempo de envío percibido < 2s"
        - "Sin bloqueo del main thread"
      accessibility:
        - "WCAG 2.1 AA"
        - "ARIA live en mensaje de éxito"
      security:
        - "Sanitización de inputs"
        - "Protección contra XSS"
        - "Validación server-side obligatoria"

    analytics_events:
      - "contact_form_view"
      - "contact_form_submit"
      - "contact_form_success"
      - "contact_form_error"

    definition_of_done:
      - "Formulario envía correctamente"
      - "Usuario recibe correo de confirmación"
      - "Equipo recibe lead"
      - "UX aprobada por diseño"
      - "Tests básicos pasando"
      - "Sin errores en consola"


# ═══════════════════════════════════════════
# US-003: Solicitud de demo guiada con captura de lead calificado
# ═══════════════════════════════════════════
  - id: "US-003"
    title: "Solicitud de demo guiada con captura de lead calificado"
    module: "landing"
    priority: "high"
    status: "implemented"
    sprint: 1
    story_points: 8
    actors: ["visitante", "cto", "director", "tomador_decision"]

    narrative: >
      Como Director de Tecnología o responsable de evaluar plataformas,
      quiero solicitar una demo de Orquestra desde la landing,
      proporcionando mis datos de forma rápida y profesional,
      para que el equipo comercial me contacte y me muestre el producto.

    strategic_note: >
      Esta funcionalidad reutiliza la infraestructura del formulario de contacto,
      pero optimizada para intención de compra (high-intent lead).

    business_goal:
      - "Capturar leads de alta intención"
      - "Acelerar pipeline comercial"
      - "Reducir fricción para solicitud de demo"
      - "Segmentar prospectos enterprise"

    ux_intent:
      primary_goal: "Solicitud de demo completada"
      secondary_goal: "Percepción de proceso enterprise"
      emotional_tone:
        - "premium"
        - "ágil"
        - "confiable"
        - "orientado a negocio"

    reuse_strategy:
      base_component: "ContactForm"
      reuse_level: "alto"
      differences:
        - "copy orientado a demo"
        - "tracking específico"
        - "campos de calificación opcionales"
        - "ruta dedicada /demo"

    functional_scope:
      entry_points:
        - "Hero CTA 'Solicitar demo'"
        - "CTA final de la landing"
        - "Navbar (opcional futuro)"

      form_fields_required:
        - "Nombre completo"
        - "Correo corporativo"
        - "Organización"
        - "Rol"
      recommended_fields:
        - "Tamaño de la organización"
        - "Interés principal"
        - "¿Qué deseas ver en la demo?"

      system_behaviors:
        - "Apertura en página dedicada o modal"
        - "Validación en tiempo real"
        - "Loading state"
        - "Confirmación visual"
        - "Email al equipo comercial"
        - "Email de confirmación al solicitante"

    acceptance_criteria:
      - id: "AC-001"
        name: "Navegación desde CTA"
        description: >
          Al hacer click en 'Solicitar demo', el usuario es dirigido
          a la experiencia de solicitud de demo sin fricción.
        validations:
          - "Navegación client-side"
          - "Tiempo de transición < 300ms"
          - "Evento analytics disparado"
        validated: true

      - id: "AC-002"
        name: "Experiencia diferenciada de demo"
        description: >
          La página o modal comunica claramente que se trata
          de una solicitud de demo guiada.
        validations:
          - "Headline orientado a demo"
          - "Microcopy de expectativa de contacto"
          - "Diseño consistente con branding"
        validated: true

      - id: "AC-003"
        name: "Formulario optimizado para lead calificado"
        description: >
          El formulario reutiliza el componente base pero
          prioriza rapidez y calidad del lead.
        validations:
          - "Tiempo de llenado ≤ 60s"
          - "Campos obligatorios mínimos"
          - "Validación inline"
          - "Accesible por teclado"
        validated: true

      - id: "AC-004"
        name: "Envío y estado de carga"
        description: >
          Al enviar la solicitud, el sistema procesa
          de forma asíncrona mostrando feedback visual.
        validations:
          - "Botón muestra loading"
          - "Prevención de doble submit"
          - "Errores manejados"
        validated: true

      - id: "AC-005"
        name: "Confirmación post-solicitud"
        description: >
          Tras envío exitoso, el usuario ve confirmación clara
          con expectativa de contacto.
        validations:
          - "Mensaje visible"
          - "Tono corporativo"
          - "Incluye tiempo estimado de respuesta"
          - "ARIA live presente"
        validated: true

      - id: "AC-006"
        name: "Notificación al equipo comercial"
        description: >
          El sistema envía email estructurado marcando
          el lead como 'Demo Request'.
        validations:
          - "Incluye metadata de origen"
          - "Timestamp"
          - "Campos completos"
        validated: true

      - id: "AC-007"
        name: "Correo de confirmación al solicitante"
        description: >
          El usuario recibe confirmación automática
          de que su demo fue solicitada.
        validations:
          - "Branding Orquestra"
          - "Resumen de solicitud"
          - "Próximos pasos claros"
        validated: true

      - id: "AC-008"
        name: "Experiencia responsive premium"
        description: >
          La solicitud de demo funciona correctamente
          en móvil, tablet y desktop.
        validations:
          - "Sin overflow en 320px"
          - "Inputs táctiles ≥44px"
          - "CTA visible"
        validated: true

    analytics_events:
      - "demo_cta_click"
      - "demo_form_view"
      - "demo_form_submit"
      - "demo_form_success"
      - "demo_form_error"

    non_functional_requirements:
      performance:
        - "Tiempo de envío percibido < 2s"
      accessibility:
        - "WCAG 2.1 AA"
      security:
        - "Validación server-side"
        - "Sanitización inputs"
        - "Protección anti-spam"

    definition_of_done:
      - "Solicitud de demo funcional"
      - "Correos enviados correctamente"
      - "Tracking activo"
      - "UX aprobada"
      - "Sin errores en consola"

# ========================================= 
# US-004  Diferenciación clara entre Contacto y Solicitar demo
# ========================================= 

  - id: "US-004"
    title: "Diferenciación clara entre Contacto y Solicitar demo"
    module: "landing"
    priority: "high"
    status: "implemented"
    sprint: 1
    story_points: 5
    actors: ["visitante", "cto", "director", "tomador_decision"]

    narrative: >
      Como Director de Tecnología evaluando Orquestra,
      experimenté confusión entre el formulario de Contacto
      y el de Solicitar demo porque ambos se ven y funcionan igual.
      Quiero que cada experiencia esté claramente diferenciada
      en propósito, mensaje y ayudas visuales,
      para saber cuál utilizar según mi necesidad.

    problem_statement:
      current_issue: >
        Los formularios de Contacto y Solicitar demo comparten
        estructura, ayudas y apariencia casi idéntica,
        lo que genera ambigüedad en la intención del usuario.
      business_risk:
        - "Fricción en conversión"
        - "Leads mal calificados"
        - "Experiencia poco enterprise"
        - "Duda en el decision maker"
      user_impact:
        - "No sé cuál elegir"
        - "No entiendo la diferencia"
        - "Percibo falta de madurez del producto"

    business_goal:
      - "Eliminar ambigüedad entre flujos"
      - "Mejorar calidad de leads"
      - "Aumentar conversión a demo"
      - "Transmitir madurez enterprise"

    ux_intent:
      primary_goal: "Claridad de propósito por flujo"
      secondary_goal: "Reducir fricción cognitiva"
      emotional_tone:
        - "claro"
        - "guiado"
        - "enterprise"
        - "intencional"

    differentiation_strategy:

      required_differences:
        - "headline específico por flujo"
        - "subcopy contextual"
        - "sugerencias inteligentes distintas"
        - "campo adicional en demo"
        - "microcopy de expectativa diferente"
        - "tracking diferenciado"

      visual_differences:
        - "iconografía contextual"
        - "badge o label del flujo"
        - "hero/header distinto"
        - "orden de campos optimizado por intención"

    acceptance_criteria:

      - id: "AC-001"
        name: "Propósito explícito por página"
        description: >
          Cada página comunica claramente su objetivo
          antes de mostrar el formulario.
        validations:
          - "Contacto orientado a preguntas generales"
          - "Demo orientado a ver el producto"
          - "Headline distinto en cada página"
          - "Subtítulo contextual"
        validated: true

      - id: "AC-002"
        name: "Sugerencias inteligentes diferenciadas"
        description: >
          Los chips de ayuda del formulario son distintos
          entre Contacto y Demo.
        validations:
          - "Contacto muestra preguntas informativas"
          - "Demo muestra intereses de demo"
          - "No comparten exactamente los mismos textos"
        validated: true

      - id: "AC-003"
        name: "Campo adicional en solicitud de demo"
        description: >
          El formulario de demo incluye al menos un campo
          específico de calificación de demo.
        validations:
          - "Existe campo '¿Qué deseas ver en la demo?'"
          - "No aparece en contacto"
          - "Es opcional pero visible"
        validated: true

      - id: "AC-004"
        name: "Microcopy de expectativa diferenciada"
        description: >
          El mensaje previo al envío explica claramente
          qué ocurrirá después en cada flujo.
        validations:
          - "Contacto promete respuesta informativa"
          - "Demo promete agendamiento o contacto comercial"
          - "Lenguaje corporativo"
        validated: true

      - id: "AC-005"
        name: "Confirmaciones post-envío distintas"
        description: >
          El mensaje de éxito refleja el tipo de solicitud.
        validations:
          - "Contacto: confirmación de recepción"
          - "Demo: próximos pasos de demo"
          - "Incluyen tiempos estimados"
        validated: true

      - id: "AC-006"
        name: "Tracking diferenciado"
        description: >
          Analytics distingue claramente ambos flujos.
        validations:
          - "contact_form_submit"
          - "demo_form_submit"
          - "No se mezclan eventos"
        validated: true

      - id: "AC-007"
        name: "Reutilización técnica sin duplicación"
        description: >
          El sistema reutiliza el componente base
          manteniendo diferenciación por variante.
        validations:
          - "Existe LeadForm reutilizable"
          - "Uso de prop variant"
          - "Sin lógica duplicada"
        validated: true

    non_functional_requirements:
      ux_quality:
        - "La diferencia se entiende en <5 segundos"
        - "No aumenta el tiempo de llenado"
      accessibility:
        - "WCAG 2.1 AA"
      performance:
        - "Sin impacto perceptible en carga"

    definition_of_done:
      - "Usuarios distinguen claramente ambos flujos"
      - "Sin duplicación de lógica"
      - "UX validada"
      - "Eventos analytics correctos"
      - "Copy aprobado por negocio"

# ============================================================================
# US-005  Navegación desde /contacto y /demo , BUG 
# ============================================================================
  - id: "US-005"
    title: "Como usuario corporativo quiero que la navegación funcione correctamente desde /contacto y /demo para acceder al contenido sin errores."
    module: "navigation"
    priority: "high"
    status: "implemented"
    sprint: 2
    related_to: ["US-001", "US-002", "US-003", "US-004"]
    persona: "Director de Tecnología / Evaluador de plataforma"

    user_story: >
      Como evaluador de la plataforma Orquestra,
      cuando navego desde las páginas /contacto o /demo,
      quiero que los enlaces del menú (Producto, Plataforma, Capacidades)
      me lleven correctamente al contenido correspondiente,
      para no perder contexto ni experimentar confusión durante la evaluación del producto.

    problem_statement: >
      Actualmente, al hacer clic en los enlaces de navegación desde /contacto o /demo,
      la aplicación solo concatena anclas (por ejemplo: /contacto#producto),
      lo que no muestra el contenido esperado porque dichas secciones existen únicamente en la landing (/).
      Esto genera fricción, sensación de producto inmaduro y rompe el flujo de exploración.

    expected_experience: >
      La navegación debe sentirse consistente, corporativa y confiable.
      Desde cualquier página, el usuario debe poder llegar a las secciones clave de la plataforma
      sin importar en qué ruta se encuentre.

    acceptance_criteria:
      - id: "AC-001"
        description: >
          Desde /contacto y /demo, al hacer clic en "Producto",
          el usuario es redirigido a la landing (/) con scroll automático a la sección #producto.
        validated: true

      - id: "AC-002"
        description: >
          Desde /contacto y /demo, al hacer clic en "Plataforma",
          el usuario es redirigido a /#plataforma con desplazamiento suave.
        validated: true

      - id: "AC-003"
        description: >
          Desde /contacto y /demo, al hacer clic en "Capacidades",
          el usuario es redirigido a /#capacidades mostrando el contenido correctamente.
        validated: true

      - id: "AC-004"
        description: >
          La navegación detecta automáticamente si el usuario está fuera de la landing
          y ajusta el href para incluir la ruta base (/).
        validated: true

      - id: "AC-005"
        description: >
          El comportamiento es consistente en navegación desktop y móvil.
        validated: true

      - id: "AC-006"
        description: >
          Se implementa scroll suave (smooth scroll) al llegar a la sección destino.
        validated: true

      - id: "AC-007"
        description: >
          No se generan rutas inválidas como /contacto#producto o /demo#capacidades.
        validated: true

      - id: "AC-008"
        description: >
          La experiencia de navegación transmite calidad enterprise y continuidad de producto.
        validated: true

    technical_notes: |
      Posibles soluciones técnicas:

      Opción A (recomendada):
        - Normalizar links del navbar:
          /#producto
          /#plataforma
          /#capacidades

      Opción B:
        - Detectar pathname actual con usePathname()
        - Si !== '/', hacer router.push('/#seccion')

      Opción C (más robusta enterprise):
        - Centralizar configuración de navegación
        - NavigationMap.ts
        - Scroll manager global

      Considerar:
        - next/link con scroll={false}
        - manejo de hash después de navegación
        - compatibilidad con App Router

    business_value: >
      Corrige un bug visible en la experiencia de navegación que afecta la percepción
      de madurez del producto. Mejora la confianza del evaluador corporativo
      y mantiene la continuidad del journey comercial.

    definition_of_done:
      - Navegación funcional desde cualquier ruta
      - Scroll correcto a secciones de la landing
      - Sin rutas con hash incorrectas
      - Validado en móvil y desktop
      - Revisado por QA

  - id: "US-006"
    title: "Como director de tecnología quiero que los formularios de Contacto y Solicitar Demo envíen correos reales usando Resend para asegurar seguimiento oportuno de prospectos."
    module: "lead-capture"
    priority: "critical"
    status: "todo"
    sprint: 2
    story_points: 8
    actors: ["director", "tomador_decision", "visitante"]
    description: >
      Actualmente los formularios de Contacto y Solicitar Demo son visuales pero no funcionales.
      Se requiere integrar el servicio de correo Resend para habilitar el envío real de mensajes,
      confirmaciones automáticas al usuario y notificación interna al equipo comercial.
      La experiencia debe ser enterprise, confiable y con feedback claro para el usuario.
    business_value:
      - "Captura real de leads interesados en Orquestra."
      - "Mejora la confianza del prospecto mediante confirmación inmediata."
      - "Permite seguimiento comercial oportuno."
      - "Prepara la plataforma para escenarios productivos."
    acceptance_criteria:
      - id: "AC-001"
        description: "Existe integración backend con Resend mediante API key segura en variables de entorno. No se expone la clave en el frontend."
        validated: false
        flow_ids: ["FLOW-011","FLOW-012"]
      - id: "AC-002"
        description: "El formulario de Contacto envía un correo al buzón comercial con los datos del prospecto."
        validated: false
        flow_ids: ["FLOW-011"]
      - id: "AC-003"
        description: "El formulario de Solicitar Demo envía un correo diferenciado al equipo comercial con datos de agendamiento."
        validated: false
        flow_ids: ["FLOW-012"]
      - id: "AC-004"
        description: "Tras el envío exitoso, el usuario visualiza un estado de éxito claro (toast o alert)."
        validated: false
        flow_ids: ["FLOW-011","FLOW-012"]
      - id: "AC-005"
        description: "El botón de envío muestra estado loading y se deshabilita para evitar envíos duplicados."
        validated: false
        flow_ids: ["FLOW-011","FLOW-012"]
      - id: "AC-006"
        description: "El sistema envía automáticamente un correo de confirmación al usuario."
        validated: false
        flow_ids: ["FLOW-013"]
      - id: "AC-007"
        description: "Los correos generados usan plantilla HTML estilo enterprise."
        validated: false
        flow_ids: ["FLOW-013","FLOW-014"]
      - id: "AC-008"
        description: "Validación de campos obligatorios en frontend y backend."
        validated: false
        flow_ids: ["FLOW-011","FLOW-012"]
      - id: "AC-009"
        description: "Manejo de errores amigable si el envío falla."
        validated: false
        flow_ids: ["FLOW-011","FLOW-012"]
      - id: "AC-010"
        description: "Se crean endpoints separados POST /api/contact y POST /api/demo."
        validated: false
        flow_ids: ["FLOW-011","FLOW-012"]
      - id: "AC-011"
        description: "Se implementa protección básica anti-spam."
        validated: false
        flow_ids: ["FLOW-011","FLOW-012"]
      - id: "AC-012"
        description: "Compatible con Next.js App Router y Tailwind."
        validated: false
        flow_ids: ["FLOW-011","FLOW-012"]

flows:
  # ─── NAVEGACIÓN Y EXPLORACIÓN ────────────────────────────
  - id: "FLOW-001"
    name: "Exploración de la Landing Page"
    type: "user_flow"
    module: "landing"
    actor: "visitante"
    priority: "high"
    status: "implemented"
    story: "US-001"
    trigger: "El usuario accede a la raíz (/)"
    steps:
      - "El sistema renderiza el Hero Section con posicionamiento enterprise."
      - "El usuario hace scroll visualizando secciones de beneficios, arquitectura modular y capacidades."
      - "El usuario interactúa con los CTAs (ej. 'Ver demo')."

  - id: "FLOW-002"
    name: "Navegación Cruzada y Scroll Suave"
    type: "user_flow"
    module: "navigation"
    actor: "visitante"
    priority: "high"
    status: "implemented"
    story: "US-005"
    trigger: "El usuario hace clic en el Navbar desde una ruta interna (ej. /contacto)"
    steps:
      - "El usuario hace clic en 'Plataforma' en el menú principal."
      - "El sistema enruta a la landing (/) usando Next Link."
      - "El navegador realiza un scroll suave hacia la sección '/#plataforma'."
      - "El usuario no pierde contexto ni encuentra enlaces rotos."

  # ─── EMBUDOS DE CONVERSIÓN ────────────────────────────
  - id: "FLOW-003"
    name: "Envío de Consulta de Contacto"
    type: "user_flow"
    module: "contact_flow"
    actor: "visitante"
    priority: "high"
    status: "implemented"
    story: "US-002"
    trigger: "El usuario navega a /contacto y llena el formulario"
    steps:
      - "El usuario ve un formulario orientado a dudas generales con chips informativos."
      - "El usuario completa el mensaje y hace clic en Enviar."
      - "El sistema valida los datos con Zod y muestra estado de carga."
      - "El sistema redirige a una pantalla de éxito confirmando la recepción."
      - "Se registra el evento 'contact_request' originando un nuevo Lead en la plataforma."

  - id: "FLOW-004"
    name: "Solicitud de Demo Calificada"
    type: "user_flow"
    module: "demo_flow"
    actor: "tomador_decision"
    priority: "high"
    status: "implemented"
    story: "US-003, US-004"
    trigger: "El usuario hace clic en 'Solicitar Demo' desde el Hero o Navbar"
    steps:
      - "El sistema navega a la ruta optimizada /demo sin footer para evitar distracciones."
      - "El usuario ve propuesta de valor lateral y un formulario con un badge 'Sesión técnica'."
      - "El usuario completa los campos, incluyendo 'Detalles de la demo' (específico para calificar ventas)."
      - "El sistema valida e higieniza los datos mediante Zod."
      - "El sistema muestra pantalla de éxito orientada a agendamiento en < 24h."
      - "Se envía la metadata y se asigna el estado 'demo_request' al Lead."

  # ─── INTEGRACIÓN DE EMAILS (RESEND) ────────────────────────────
  - id: "FLOW-011"
    name: "Envío de formulario de contacto (Backend)"
    type: "system_flow"
    module: "lead-capture"
    actor: "system"
    priority: "critical"
    status: "todo"
    story: "US-006"
    trigger: "Frontend hace POST a /api/contact"
    steps:
      - "Validación del payload con Zod en el servidor."
      - "Instancia de Resend construye email interno comercial."
      - "Dispara FLOW-013 (Confirmación automática al lead)."
      - "Devuelve 200 OK."

  - id: "FLOW-012"
    name: "Envío de solicitud de demo (Backend)"
    type: "system_flow"
    module: "lead-capture"
    actor: "system"
    priority: "critical"
    status: "todo"
    story: "US-006"
    trigger: "Frontend hace POST a /api/demo"
    steps:
      - "Validación del payload con Zod en el servidor."
      - "Instancia de Resend construye email interno de ventas con prioridad."
      - "Dispara FLOW-013 (Confirmación automática de agenda)."
      - "Devuelve 200 OK."

  - id: "FLOW-013"
    name: "Confirmación automática al usuario"
    type: "system_flow"
    module: "lead-capture"
    actor: "system"
    priority: "high"
    status: "todo"
    story: "US-006"
    trigger: "Llamada exitosa en FLOW-011 o FLOW-012"
    steps:
      - "Genera HTML renderizado (React Email o similar) de bienvenida."
      - "Resend.emails.send() con template corporativo."
      - "Actualiza estado del Lead a 'contacted' o 'qualified'."

  - id: "FLOW-014"
    name: "Notificación interna al equipo"
    type: "system_flow"
    module: "lead-capture"
    actor: "system"
    priority: "high"
    status: "todo"
    story: "US-006"
    trigger: "Nuevo form submit"
    steps:
      - "Envía los datos al buzón general (o webhook)."
      - "Asegura que el Subject contenga el contexto (ej. [Nuevo Lead - Demo])."
